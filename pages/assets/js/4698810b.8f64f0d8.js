"use strict";(self.webpackChunkspr_docs=self.webpackChunkspr_docs||[]).push([[3372],{22309:(e,i,s)=>{s.r(i),s.d(i,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>t,metadata:()=>c,toc:()=>l});var n=s(85893),r=s(11151);const t={sidebar_position:3},a="Firewall",c={id:"guides/firewall",title:"Firewall",description:"firewall-list",source:"@site/docs/guides/firewall.md",sourceDirName:"guides",slug:"/guides/firewall",permalink:"/pages/docs/guides/firewall",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Manage Devices",permalink:"/pages/docs/guides/device"},next:{title:"DNS Block Lists & Settings",permalink:"/pages/docs/guides/dns"}},d={},l=[{value:"Firewall Use Cases",id:"firewall-use-cases",level:2},{value:"Advanced firewall configuration",id:"advanced-firewall-configuration",level:4},{value:"Port Forwarding",id:"port-forwarding",level:2},{value:"Add a Port Forward",id:"add-a-port-forward",level:3},{value:"Inbound Traffic Block",id:"inbound-traffic-block",level:2},{value:"Add a Inbound Block",id:"add-a-inbound-block",level:3},{value:"Forwarding Traffic Block",id:"forwarding-traffic-block",level:2},{value:"Add a Forwarding Block",id:"add-a-forwarding-block",level:3},{value:"Custom Interface Access",id:"custom-interface-access",level:2},{value:"Multicast Proxy",id:"multicast-proxy",level:2},{value:"Endpoints",id:"endpoints",level:2},{value:"Services",id:"services",level:2},{value:"Working with Service Ports",id:"working-with-service-ports",level:3},{value:"Multicast Settings",id:"multicast-settings",level:3}];function o(e){const i={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",img:"img",li:"li",ol:"ol",p:"p",ul:"ul",...(0,r.a)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.header,{children:(0,n.jsx)(i.h1,{id:"firewall",children:"Firewall"})}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.img,{alt:"firewall-list",src:s(16988).Z+"",width:"1280",height:"800"})}),"\n",(0,n.jsx)(i.h2,{id:"firewall-use-cases",children:"Firewall Use Cases"}),"\n",(0,n.jsxs)(i.p,{children:["Most common to use is ",(0,n.jsx)(i.em,{children:"Port Forwarding"})," and ",(0,n.jsx)(i.em,{children:"Inbound Traffic Block"}),"."]}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.a,{href:"#port-forwarding",children:"Port Forwarding"})," is if you want to open a port ",(0,n.jsx)(i.em,{children:"from WAN"})," and forward the traffic to a local device"]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.a,{href:"#inbound-traffic-block",children:"Inbound Traffic Block"})," block access from a specific address and/or destination"]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.a,{href:"#forwarding-traffic-block",children:"Forwarding Traffic Block"})," allow/block devices from your local network"]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.a,{href:"#services",children:"Services"})," Choose which Ports on SPR are accessible"]}),"\n"]}),"\n",(0,n.jsx)(i.h4,{id:"advanced-firewall-configuration",children:"Advanced firewall configuration"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.a,{href:"#custom-interface-access",children:"Custom Interface Access"})," - Join a docker bridge or custom interface to SPR networking"]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.a,{href:"#multicast-proxy",children:"Multicast Proxy"})," -- Configure mDNS, SSDP, and other UDP broadcast services"]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.a,{href:"#endpoints",children:"Endpoints"})," - Define one-way connectivity rules"]}),"\n"]}),"\n",(0,n.jsx)(i.h2,{id:"port-forwarding",children:"Port Forwarding"}),"\n",(0,n.jsx)(i.p,{children:"Set rules to forward incoming traffic (DNAT forwarding)."}),"\n",(0,n.jsx)(i.h3,{id:"add-a-port-forward",children:"Add a Port Forward"}),"\n",(0,n.jsxs)(i.p,{children:["On the ",(0,n.jsx)(i.em,{children:"Firewall"})," page expand ",(0,n.jsx)(i.em,{children:"Port Forwarding"})," and click ",(0,n.jsx)(i.em,{children:"Add Forward"}),"."]}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.img,{alt:"firewall-port-forward-add",src:s(47918).Z+"",width:"1280",height:"598"})}),"\n",(0,n.jsx)(i.p,{children:"In the screenshot all traffic from source address 1.1.1.1 with destination port 8080 is redirected to 192.168.2.106 on port 8080."}),"\n",(0,n.jsx)(i.h2,{id:"inbound-traffic-block",children:"Inbound Traffic Block"}),"\n",(0,n.jsx)(i.p,{children:"Block traffic coming into the network at the PREROUTING stage."}),"\n",(0,n.jsx)(i.h3,{id:"add-a-inbound-block",children:"Add a Inbound Block"}),"\n",(0,n.jsxs)(i.p,{children:["On the ",(0,n.jsx)(i.em,{children:"Firewall"})," page expand ",(0,n.jsx)(i.em,{children:"Inbound Traffic Block"})," and click ",(0,n.jsx)(i.em,{children:"Add IP Block"}),"."]}),"\n",(0,n.jsxs)(i.p,{children:[(0,n.jsx)(i.img,{alt:"firewall-inbound-traffic-block-add",src:s(96870).Z+"",width:"1280",height:"596"}),"\nIn the screenshot all traffic from source address ",(0,n.jsx)(i.em,{children:"1.1.1.1"})," with destination address ",(0,n.jsx)(i.em,{children:"192.168.2.106"})," will be blocked."]}),"\n",(0,n.jsx)(i.h2,{id:"forwarding-traffic-block",children:"Forwarding Traffic Block"}),"\n",(0,n.jsx)(i.p,{children:"Add rules to block traffic at the FORWARDING stage."}),"\n",(0,n.jsx)(i.h3,{id:"add-a-forwarding-block",children:"Add a Forwarding Block"}),"\n",(0,n.jsxs)(i.p,{children:["On the ",(0,n.jsx)(i.em,{children:"Firewall"})," page expand ",(0,n.jsx)(i.em,{children:"Forwarding Traffic Block"})," and click ",(0,n.jsx)(i.em,{children:"Add Forwarding Block"}),"."]}),"\n",(0,n.jsxs)(i.p,{children:[(0,n.jsx)(i.img,{alt:"firewall-forwarding-traffic-block-add",src:s(88101).Z+"",width:"1280",height:"597"}),"\nIn the screenshot all traffic from source address ",(0,n.jsx)(i.em,{children:"192.168.2.103"})," with destination address ",(0,n.jsx)(i.em,{children:"192.168.2.106"})," on port ",(0,n.jsx)(i.em,{children:"8080"})," will be blocked."]}),"\n",(0,n.jsx)(i.p,{children:"An example use case would adding the LAN policy to a device but wanting to block access on some outgoing ports or IPs."}),"\n",(0,n.jsx)(i.h2,{id:"custom-interface-access",children:"Custom Interface Access"}),"\n",(0,n.jsx)(i.p,{children:"Manage network access for custom interface names and control access for docker networks."}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.img,{alt:"firewall-custom-interface-rule-add",src:s(60225).Z+"",width:"1280",height:"599"})}),"\n",(0,n.jsx)(i.p,{children:"Use this to forward traffic to an interface running in a separate container."}),"\n",(0,n.jsxs)(i.p,{children:["See more in the repository for the ",(0,n.jsx)(i.a,{href:"https://github.com/spr-networks/spr-mitmproxy",children:"spr-mitmproxy plugin"})," for how this feature can be used."]}),"\n",(0,n.jsx)(i.h2,{id:"multicast-proxy",children:"Multicast Proxy"}),"\n",(0,n.jsxs)(i.p,{children:["Set multicast ip",":port"," addresses to proxy between devices. This allows discovery services such as SSDP/Zeroconf and mDNS in SPR.\nBy dfeault only SSDP and mDNS are on. You may need to enable PTP or other services for streaming and device sync. If something is not working as expected, let us know,\nby ",(0,n.jsx)(i.a,{href:"https://github.com/spr-networks/super/issues",children:"filing an issue"})]}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.img,{alt:"firewall-multicast",src:s(36580).Z+"",width:"2632",height:"1710"})}),"\n",(0,n.jsx)(i.p,{children:"A future release will enable tags to apply proxying to only a subset of devices."}),"\n",(0,n.jsx)(i.h2,{id:"endpoints",children:"Endpoints"}),"\n",(0,n.jsx)(i.p,{children:"Service Endpoints serves as helpers for creating other firewall rules, as well as one-way connectivity from devices to the endpoint when they share a tag."}),"\n",(0,n.jsx)(i.p,{children:"When devices are in the same group they have full access to each other. Device with the LAN policy have one-way access to all devices via NAT."}),"\n",(0,n.jsx)(i.p,{children:"Endpoints create a quick way to apply one-way connectivity a specific destination, by applying tags."}),"\n",(0,n.jsxs)(i.ol,{children:["\n",(0,n.jsx)(i.li,{children:"Create an Endpoint definition"}),"\n"]}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.img,{alt:"firewall-endpoint-create",src:s(78673).Z+"",width:"2668",height:"1674"})}),"\n",(0,n.jsxs)(i.ol,{start:"2",children:["\n",(0,n.jsxs)(i.li,{children:["\n",(0,n.jsxs)(i.p,{children:["Apply a tag\n",(0,n.jsx)(i.img,{alt:"firewall-endpoint-tag",src:s(12048).Z+"",width:"2666",height:"1714"})]}),"\n"]}),"\n",(0,n.jsxs)(i.li,{children:["\n",(0,n.jsxs)(i.p,{children:["Apply the same tag to the device that should have access to the endpoint\n",(0,n.jsx)(i.img,{alt:"firewall-endpoint-tag",src:s(79407).Z+"",width:"2664",height:"2394"})]}),"\n"]}),"\n",(0,n.jsxs)(i.li,{children:["\n",(0,n.jsxs)(i.p,{children:["Example of device access before and after it has the tag\n",(0,n.jsx)(i.img,{alt:"firewall-endpoint-tag",src:s(91864).Z+"",width:"1118",height:"706"})]}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(i.p,{children:["The other side, ",(0,n.jsx)(i.code,{children:"192.168.2.58"}),", does not gain access to the device on ",(0,n.jsx)(i.code,{children:"192.168.2.218"})," beyond receiving TCP connections on ",(0,n.jsx)(i.code,{children:":22900"}),"."]}),"\n",(0,n.jsx)(i.h2,{id:"services",children:"Services"}),"\n",(0,n.jsx)(i.p,{children:"The services view controls firewall settings for the SPR router itself. The Ping settings\ncontrol if SPR can be pinged. These are on during setup but disabled by default after."}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.img,{src:s(82339).Z+"",width:"1800",height:"1306"})}),"\n",(0,n.jsx)(i.h3,{id:"working-with-service-ports",children:"Working with Service Ports"}),"\n",(0,n.jsx)(i.p,{children:"The allowed SPR services are default on for all devices. In a future release tag support\nwill be improved to further restrict port access to the API (tcp 80) and SSH (tcp 22) on SPR."}),"\n",(0,n.jsx)(i.p,{children:"To remove access for LAN devices, delete the service entry."}),"\n",(0,n.jsx)(i.p,{children:'To allow access to the service from the Uplink interface, turn the slider to on ("Upstream WAN").'}),"\n",(0,n.jsx)(i.h3,{id:"multicast-settings",children:"Multicast Settings"}),"\n",(0,n.jsx)(i.p,{children:"SPR uses a multicast UDP Proxy to relay multicast traffic between devices."}),"\n",(0,n.jsxs)(i.p,{children:[(0,n.jsx)(i.img,{src:s(73258).Z+"",width:"2672",height:"804"}),'\nSet the "Enable Multicast Proxy" to false to disable the proxy and all mDNS settings.']}),"\n",(0,n.jsx)(i.p,{children:'The "Advertise Router over mDNS" toggles whether or not the proxy will respond to mDNS name requests on the uplink interfaces.'}),"\n",(0,n.jsx)(i.p,{children:"This makes it possible to discover SPR with querying 'spr.local' on systems that are aware of mDNS."}),"\n",(0,n.jsx)(i.p,{children:"The mDNS name can also be customized."})]})}function h(e={}){const{wrapper:i}={...(0,r.a)(),...e.components};return i?(0,n.jsx)(i,{...e,children:(0,n.jsx)(o,{...e})}):o(e)}},60225:(e,i,s)=>{s.d(i,{Z:()=>n});const n=s.p+"assets/images/firewall-custom-interface-rule-add-6c2885f7af0f5fd0911a4fde33cb4c27.png"},78673:(e,i,s)=>{s.d(i,{Z:()=>n});const n=s.p+"assets/images/firewall-endpoint-create-e87e3d36fc353f8934b0db6ef96bcf18.png"},79407:(e,i,s)=>{s.d(i,{Z:()=>n});const n=s.p+"assets/images/firewall-endpoint-device-tag-3f964bece0f6091d364812ab273dfe12.png"},91864:(e,i,s)=>{s.d(i,{Z:()=>n});const n=s.p+"assets/images/firewall-endpoint-example-16e8d6cd5fc702d55e613d5a4b8de7f6.png"},12048:(e,i,s)=>{s.d(i,{Z:()=>n});const n=s.p+"assets/images/firewall-endpoint-tag-dde1b8e289bcca4ca9c3605a191c39ae.png"},88101:(e,i,s)=>{s.d(i,{Z:()=>n});const n=s.p+"assets/images/firewall-forwarding-traffic-block-add-f5636b32bc172408ce95a96e87f21f2c.png"},96870:(e,i,s)=>{s.d(i,{Z:()=>n});const n=s.p+"assets/images/firewall-inbound-traffic-block-add-d25b6758ba9fe85977ff0c88a2ddafd9.png"},16988:(e,i,s)=>{s.d(i,{Z:()=>n});const n=s.p+"assets/images/firewall-list-a47dadeff14f1f0071452f171e451695.png"},73258:(e,i,s)=>{s.d(i,{Z:()=>n});const n=s.p+"assets/images/firewall-multicast-settings-c848d4a444de338fcff9617e899288c7.png"},36580:(e,i,s)=>{s.d(i,{Z:()=>n});const n=s.p+"assets/images/firewall-multicast-1078b918e413b314b737340bb1d2436a.png"},47918:(e,i,s)=>{s.d(i,{Z:()=>n});const n=s.p+"assets/images/firewall-port-forward-add-b53149bdb7e25797780605773a48bf4d.png"},82339:(e,i,s)=>{s.d(i,{Z:()=>n});const n=s.p+"assets/images/firewall-services-e7e52bbdb13fa954765b7ffd9d9dc6d8.png"},11151:(e,i,s)=>{s.d(i,{Z:()=>c,a:()=>a});var n=s(67294);const r={},t=n.createContext(r);function a(e){const i=n.useContext(t);return n.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function c(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),n.createElement(t.Provider,{value:i},e.children)}}}]);