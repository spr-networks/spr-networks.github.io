openapi: 3.0.0
servers:
  - url: //192.168.2.1/
    description: SPR API server
info:
  description: >
    # Introduction

    The API service exists for communication between service containers and to
    support

    external requests from the web front end or CLI tools.


    The internal APIs run over unix sockets and rely on filesystem namespaces
    for authentication.


    Currently there are four internal APIs:

    - Support for the [wifid service accepting stations](#tag/unix_wifid)

    - Support for dynamic networking configuration with [DHCP](#tag/unix_dhcpd)

    - [Wireguard](#tag/unix_wireguard)

    - DHCP [Tiny Subnets](#tag/tinysubnets_plugin)


    The external API runs over port `:80` or can optionally be configured to run
    over SSL on port `:443`.


    [ â‡¨ View the code](https://github.com/spr-networks/super/tree/main/api)


    # Authentication


    ### Configuration

    On the device, the following files contain credentials for access.

    - `config/auth/auth_users.json` is a JSON file with a dictionary for
    username, password pairs

    - `configs/auth/auth_tokens.json` is a JSON file with a list of
    authentication tokens


    <SecurityDefinitions />


    # API Extensions

    API extensions operate through a reverse proxy into a unix socket. They
    allow for hosting

    extensions to the API on the same web origin while running in a different
    process or container.


    Extensions are configured in ```configs/base/api.json```


    This example shows the mapping of unix://state/dns/dns_block_plugin to 
    http://APIHOST/plugins/dns/block/


    ```json

    {
      "Plugins" : [{
        "Name": "dns block extension",
        "URI": "dns/block",
        "UnixPath": "/state/dns/dns_block_plugin"
      }]
    }

    ```


    See the API documentation for plugins [here](#tag/plugins)
  version: 0.3.0
  title: Secure Programmable Router API
  contact:
    name: SPR contact
    url: https://www.supernetworks.org
  x-logo:
    url: https://www.supernetworks.org/pages/img/logo.png
    altText: SPR logo
tags:
  - name: device
    x-displayName: Devices
    description: Manage Device Wifi Authentication and Network Access
  - name: group
    x-displayName: Groups
    description: Groups are used to manage device connectivity and firewall rules
  - name: psk
    x-displayName: PSK
    description: Manage Device Passphrases
  - name: traffic
    x-displayName: Network Traffic
    description: Device traffic information
  - name: network
    x-displayName: Network Information
    description: Operations about Network, NFTable, IP Address information
  - name: firewall
    x-displayName: Firewall
    description: Operations for forwarding rules and blocking
  - name: hostapd
    x-displayName: Hostapd
    description: Operations about hostapd
  - name: plugins
    x-displayName: Plugins
    description: Operations about plugins
  - name: dnsblock
    x-displayName: DNS Block
    description: CoreDNS Block plugin
  - name: dnslog
    x-displayName: DNS Log
    description: CoreDNS Log plugin
  - name: wireguard
    x-displayName: Wireguard
    description: Wireguard plugin
  - name: lookup
    x-displayName: Lookup
    description: Lookup plugin for ASN & OUI information
  - name: dyndns
    x-displayName: Dynamic DNS
    description: Dynamic DNS Record Updater
  - name: tokens
    x-displayName: Tokens
    description: Api Tokens
  - name: notifications
    x-displayName: Notifications
    description: Notifications
  - name: psk_model
    x-displayName: PSK
    description: >
      <SchemaDefinition schemaRef="#/components/schemas/PSKEntry"
      exampleRef="#/components/examples/PSKEntry" />
  - name: device_model
    x-displayName: Device
    description: >
      <SchemaDefinition schemaRef="#/components/schemas/DeviceEntry"
      exampleRef="#/components/examples/DeviceEntry" />
  - name: group_model
    x-displayName: Group
    description: >
      <SchemaDefinition schemaRef="#/components/schemas/GroupEntry"
      exampleRef="#/components/examples/GroupEntry" />
  - name: plugin_model
    x-displayName: Plugin
    description: >
      <SchemaDefinition schemaRef="#/components/schemas/PluginEntry"
      exampleRef="#/components/examples/PluginEntry" />
  - name: unix_wifid
    x-displayName: Wifid
    description: Listens for requests on ```unix:///state/wifi/apisock```
  - name: unix_dhcpd
    x-displayName: dhcpd
    description: Listens for requests on ```unix:///state/dhcp/apisock```
  - name: unix_wireguard
    x-displayName: wireguard
    description: Listens for requests on ```unix:///state/plugins/wireguard/apisock```
  - name: unix_superd
    x-displayName: Superd
    description: Listens for requests on ```unix:///state/plugins/superd/socket```
  - name: tinysubnets
    x-displayName: tinysubnets
    description: Listens for requests on ```unix:///state/dhcp/tinysubnets_plugin```
  - name: general
    x-displayName: Misc
    description: Misc information
  - name: releases
    x-displayName: Releases
    description: Manage SPR Release Channel and Version
  - name: plus
    x-displayName: Plus
    description: PLUS features
  - name: uplink
    x-displayName: Uplink
    description: Configure outbound interfaces
  - name: link
    x-displayName: Link
    description: Configure LAN interfaces
x-tagGroups:
  - name: Web API
    tags:
      - device
      - group
      - network
      - firewall
      - traffic
      - psk
      - hostapd
      - uplink
      - link
      - general
      - releases
      - plugins
      - tokens
      - notifications
      - plus
  - name: Default API Extensions
    tags:
      - dnsblock
      - dnslog
      - wireguard
      - lookup
      - dyndns
  - name: Internal Unix Socket APIs
    tags:
      - unix_wifid
      - unix_dhcpd
      - unix_wireguard
      - unix_superd
      - tinysubnets
  - name: Object Types
    tags:
      - device_model
      - group_model
      - psk_model
      - plugin_model
paths:
  /devices:
    get:
      tags:
        - device
      summary: Get Devices
      description: Returns a map of registered devices, indexed by MAC address
      operationId: getDevices
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeviceEntryMap'
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" \
              "http://192.168.2.1/devices"
  /device?identity={identity}:
    put:
      tags:
        - device
      summary: Update Device
      description: >-
        Update information specified by the MAC address in the identity
        parameter. All fields are optional. If a PSKEntry.PskType is set and a
        PSKEntry.Psk is not set, one will be generated and returned. To create a
        wildcard PSK for adding a new device, use the string "pending" for the
        identity.
      operationId: handleUpdateDevice
      parameters:
        - name: identity
          in: path
          description: MAC address
          required: true
          schema:
            type: string
            example: '11:22:33:44:55:61'
      requestBody:
        $ref: '#/components/requestBodies/DeviceEntry'
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeviceEntry'
        '404':
          description: Device not found
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" -X PUT \
              "http://192.168.2.1/device?identity=11:22:33:44:55:66" < device.json
    delete:
      tags:
        - device
      summary: Delete Device
      description: Delete a Device specified by the MAC address in the identity parameter
      operationId: deleteDevice
      parameters:
        - name: identity
          in: path
          description: MAC address
          required: true
          schema:
            type: string
            example: '11:22:33:44:55:61'
      responses:
        '200':
          description: successful operation
        '404':
          description: Device not found
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" -X DELETE \
              "http://192.168.2.1/device?identity=11:22:33:44:55:66"
  /groups:
    get:
      tags:
        - group
      summary: Get all Groups
      description: Return all available groups
      operationId: getGroups
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GroupEntryArray'
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" \
              "http://192.168.2.1/groups"
    put:
      tags:
        - group
      summary: Add Group
      description: |
        If the group does not exist, it will be created.
        If it exists it will be updated. Fields are optional.
      operationId: updateGroups
      requestBody:
        $ref: '#/components/requestBodies/GroupEntry'
      responses:
        '200':
          description: successful operation
        '400':
          description: Invalid input
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" -X PUT  \
              "http://192.168.2.1/group" \
                 --data '{"Name": "vpn", "Disabled": false, "GroupTags": ["private"]}'
    delete:
      tags:
        - group
      summary: Delete Group
      description: ''
      operationId: deleteGroup
      responses:
        '200':
          description: successful operation
        '404':
          description: Invalid Group supplied
      requestBody:
        $ref: '#/components/requestBodies/GroupEntry'
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" -X DELETE  \
              "http://192.168.2.1/groups" \
                --data '{"Name": "vpn"}'
  /uplink/wifi:
    get:
      tags:
        - uplink
      summary: Get WPA Supplicant Configuration
      description: Retrieves the current WPA supplicant configuration.
      operationId: getWpaSupplicantConfig
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WPASupplicantConfig'
        '404':
          description: not found
      security:
        - basicAuth: []
        - bearerAuth: []
    put:
      tags:
        - uplink
      summary: Update or Add WPA Supplicant Interface Configuration
      description: Updates an existing WPA interface configuration or adds a new one.
      operationId: updateWpaSupplicantConfig
      responses:
        '200':
          description: successful operation
        '400':
          description: malformed data
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/WPAIface'
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" -X PUT \
              "http://192.168.2.1/uplink/wifi" \
              --data '{
                        "Iface": "wlan0",
                        "Enabled": true,
                        "Networks": [
                          {
                            "Disabled": false,
                            "Password": "password123",
                            "SSID": "MySSID",
                            "KeyMgmt": "WPA-PSK",
                            "Priority": "1",
                            "BSSID": "00:11:22:33:44:55"
                          }
                        ]
                      }'
  /uplink/ppp:
    get:
      tags:
        - uplink
      summary: Get PPP Configuration
      description: Retrieves the current PPP configuration.
      operationId: getPPPConfig
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PPPConfig'
        '404':
          description: not found
      security:
        - basicAuth: []
        - bearerAuth: []
    put:
      tags:
        - uplink
      summary: Update or Add PPP Interface Configuration
      description: Updates an existing PPP interface configuration or adds a new one.
      operationId: updatePPPConfig
      responses:
        '200':
          description: successful operation
        '400':
          description: malformed data
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PPPIface'
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" -X PUT \
              "http://192.168.2.1/uplink/ppp" \
              --data '{
                        "Iface": "eth0",
                        "PPPIface": "ppp0",
                        "Enabled": true,
                        "Username": "user",
                        "Secret": "password",
                        "VLAN": "10",
                        "MTU": "1500"
                      }'
  /uplink/ip:
    put:
      tags:
        - uplink
      summary: Update Interface IP Configuration for an existing interface
      description: Updates the IP configuration of a network interface.
      operationId: updateLinkIpConfig
      responses:
        '200':
          description: successful operation
        '400':
          description: malformed data
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/InterfaceConfig'
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" -X PUT \
              "http://192.168.2.1/uplink/ip" \
              --data '{
                        "Name": "eth0",
                        "Type": "Downlink",
                        "Subtype": "VLAN-Trunk",
                        "Enabled": true,
                        "DisableDHCP": false,
                        "IP": "192.168.1.2",
                        "Router": "192.168.1.1",
                        "VLAN": "10"
                      }'
  /link/config:
    put:
      tags:
        - link
      summary: Update Link Configuration
      description: Updates the configuration of a LAN network interface.
      operationId: updateLinkConfig
      responses:
        '200':
          description: successful operation
        '400':
          description: malformed data
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BasicInterfaceConfig'
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" -X PUT \
              "http://192.168.2.1/link/config" \
              --data '{
                        "Name": "eth0",
                        "Type": "static",
                        "Subtype": "default",
                        "Enabled": true
                      }'
  /link/vlan/{interface}/{state}:
    put:
      tags:
        - link
      summary: Update VLAN Trunk State on Interface
      description: Set an interface as a VLAN trunk, enabling or disabling it.
      operationId: updateLinkVlanTrunk
      parameters:
        - name: interface
          in: path
          required: true
          description: Name of the network interface.
          schema:
            type: string
        - name: state
          in: path
          required: true
          description: State of the VLAN trunk on the interface (enable or disable).
          schema:
            type: string
            enum:
              - enable
              - disable
      responses:
        '200':
          description: successful operation
        '400':
          description: malformed data
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            # Example to enable VLAN trunk on eth0
            curl -u "admin:pass" -X PUT \
              "http://192.168.2.1/link/vlan/eth0/enable"
            # Example to disable VLAN trunk on eth0
            curl -u "admin:pass" -X PUT \
              "http://192.168.2.1/link/vlan/eth0/disable"
  /reloadPSKFiles:
    put:
      tags:
        - psk
      summary: Reload PSK files
      description: >-
        Tells Hostapd to reload PSK files. This will not boot off connected
        devices. This does not need to be called after adding or removing PSK
        entries.
      operationId: reloadPSKFiles
      responses:
        '200':
          description: successful operation
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" -X PUT  \
              "http://192.168.2.1/reloadPSKFiles"
  /pendingPSK:
    get:
      tags:
        - psk
      summary: Pending PSKs
      description: Checks if there is a pending PSK that has not been assigned to a MAC yet
      operationId: pendingPSK
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: boolean
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" \
              "http://192.168.2.1/pendingPSK"
  /ip/addr:
    get:
      tags:
        - network
      summary: IP Address Information
      description: Returns the output of `ip -j addr`
      operationId: ipAddr
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Interface'
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" \
              "http://192.168.2.1/ip/addr"
  /ip/link/{interface}/{state}:
    get:
      tags:
        - network
      summary: Set Link State
      description: Set ip link status `up` or `down`
      operationId: ipLink
      parameters:
        - name: interface
          in: path
          description: Interface name
          required: true
          schema:
            type: string
        - name: state
          in: path
          description: Set interface to up or down
          required: true
          schema:
            type: string
            pattern: /^(up|down)$/
      responses:
        '200':
          description: successful operation
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" \
              "http://192.168.2.1/ip/link/wlan0/up"
  /nfmap/{name}:
    get:
      tags:
        - network
      summary: NFTable Verdict Map
      description: >-
        Returns the output of `nft -j` for the verdict map specificed by the
        name parameter
      operationId: showNFMap
      parameters:
        - name: name
          in: path
          description: Name of the nfmap to fetch
          required: true
          schema:
            type: string
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
        '400':
          description: Invalid Map name supplied
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" \
              "http://192.168.2.1/nfmap/dns_access"
  /arp:
    get:
      tags:
        - network
      summary: ARP Table
      description: Returns the ARP table
      operationId: showARP
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/ArpEntry'
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" \
              "http://192.168.2.1/arp"
  /iw/list:
    get:
      tags:
        - network
      summary: Wifi Interfaces
      description: Returns the output of `iw list` in json format
      operationId: iwList
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" \
              "http://192.168.2.1/iw/list"
  /iw/dev:
    get:
      tags:
        - network
      summary: Wifi Devices
      description: Returns the output of `iw dev` in json format
      operationId: iwDev
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" \
              "http://192.168.2.1/iw/dev"
  /iw/dev/{iface}/scan:
    get:
      tags:
        - network
      summary: Get Nearby Wifi Networks
      description: |
        Returns the output of `iw dev iface scan` in json format.

        *Note:* the specified interface needs to be in managed mode.
      operationId: iwScan
      parameters:
        - name: iface
          in: path
          description: interface
          required: true
          schema:
            type: string
            example: wlan0
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                example:
                  - bssid: '11:11:11:11:11:11'
                    interface: wlan0
                    freq: 2412
                    ssid: sample_ssid1
                    authentication_suites: PSK
                    signal_dbm: -64
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" \
              "http://192.168.2.1/iw/dev/wlan0/scan"
  /firewall/config:
    get:
      tags:
        - firewall
      summary: Retrieve firewall config
      description: Returns the firewall API configuration
      operationId: firewallConfiguration
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FirewallConfig'
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" \
              "http://192.168.2.1/firewall/config"
  /firewall/forward:
    put:
      tags:
        - firewall
      summary: Add a Forwarding Rule
      description: ''
      operationId: addFirewallForward
      responses:
        '200':
          description: successful operation
        '400':
          description: malformed data
      requestBody:
        $ref: '#/components/requestBodies/FirewallForward'
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" -X PUT  \
              "http://192.168.2.1/firewall/forward" \
              --data '{
                        "DstIP": "1.2.3.4",
                        "SrcIP": "0.0.0.0/24",
                        "SrcPort": "0-10",
                        "DstPort": "any",
                        "Protocol": "tcp"
                      }'
    delete:
      tags:
        - firewall
      summary: Delete a Forwarding Rule
      description: Delete forwarding rule with matching contents
      operationId: deleteFirewallForward
      responses:
        '200':
          description: successful operation
        '404':
          description: not found
      requestBody:
        $ref: '#/components/requestBodies/FirewallForward'
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" -X DELETE  \
              "http://192.168.2.1/firewall/forward" \
              --data '{
                        "DstIP": "1.2.3.4",
                        "SrcIP": "0.0.0.0/24",
                        "SrcPort": "0-10",
                        "DstPort": "any",
                        "Protocol": "tcp"
                      }'
  /firewall/block:
    put:
      tags:
        - firewall
      summary: Add IP Block
      description: Add IP Block Rule
      operationId: addFirewallBlock
      responses:
        '200':
          description: successful operation
        '400':
          description: malformed data
      requestBody:
        $ref: '#/components/requestBodies/FirewallBlock'
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" -X PUT  \
              "http://192.168.2.1/firewall/block" \
              --data '{
                        "DstIP": "1.2.3.4",
                        "SrcIP": "0.0.0.0/24",
                        "Protocol": "tcp"
                      }'
    delete:
      tags:
        - firewall
      summary: Delete IP Block
      description: Delete blocking rule with matching contents
      operationId: deleteFirewallBlock
      responses:
        '200':
          description: successful operation
        '404':
          description: not found
      requestBody:
        $ref: '#/components/requestBodies/FirewallBlock'
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" -X DELETE  \
              "http://192.168.2.1/firewall/block" \
              --data '{
                        "DstIP": "1.2.3.4",
                        "SrcIP": "0.0.0.0/24",
                        "Protocol": "tcp"
                      }'
  /firewall/block_forward:
    put:
      tags:
        - firewall
      summary: Add Forward Block
      description: Add Forward Block Rule, to block outbound traffic
      operationId: addFirewallBlockForward
      responses:
        '200':
          description: successful operation
        '400':
          description: malformed data
      requestBody:
        $ref: '#/components/requestBodies/FirewallBlockForward'
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" -X PUT  \
              "http://192.168.2.1/firewall/block_forward" \
              --data '{
                        "DstIP": "1.2.3.4",
                        "SrcIP": "0.0.0.0/24",
                        "Protocol": "tcp"
                        "DstPort: "0-65535"
                      }'
    delete:
      tags:
        - firewall
      summary: Delete Forward Block
      description: Delete blocking rule with matching contents
      operationId: deleteFirewallBlockForward
      responses:
        '200':
          description: successful operation
        '404':
          description: not found
      requestBody:
        $ref: '#/components/requestBodies/FirewallBlockForward'
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" -X DELETE  \
              "http://192.168.2.1/firewall/block_forward" \
              --data '{
                        "DstIP": "1.2.3.4",
                        "SrcIP": "0.0.0.0/24",
                        "Protocol": "tcp"
                        "DstPort: "0-65535"
                      }'
  /firewall/service_port:
    put:
      tags:
        - firewall
      summary: Allow Service Port Access
      description: >-
        Service Ports are ports that run on the SPR router itself. They can be
        for LAN clients only or for upstream also
      operationId: addFirewallServicePort
      responses:
        '200':
          description: successful operation
        '400':
          description: malformed data
      requestBody:
        $ref: '#/components/requestBodies/ServicePort'
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" -X PUT  \
              "http://192.168.2.1/firewall/service_port" \
              --data '{
                        "UpstreamEnabled": false,
                        "Protocol": "tcp"
                        "Port: "22"
                      }'
    delete:
      tags:
        - firewall
      summary: Delete Service Port Access
      description: Delete service port from allow list
      operationId: deleteFirewallServicePort
      responses:
        '200':
          description: successful operation
        '404':
          description: not found
      requestBody:
        $ref: '#/components/requestBodies/ServicePort'
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" -X DELETE  \
              "http://192.168.2.1/firewall/service_port" \
              --data '{
                        "UpstreamEnabled": false,
                        "Protocol": "tcp"
                        "Port: "22"
                      }'
  /firewall/endpoint:
    put:
      tags:
        - firewall
      summary: Add Firewall Endpoint
      description: Endpoints store common destinations for the UI to populate fields with
      operationId: addFirewallEndpoint
      responses:
        '200':
          description: successful operation
        '400':
          description: malformed data
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Endpoint'
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" -X PUT \
              "http://192.168.2.1/firewall/endpoint" \
              --data '{
                        "RuleName": "exampleRule",
                        "Disabled": false,
                        "Protocol": "tcp",
                        "IP": "192.168.2.100",
                        "Domain": "example.com",
                        "Port": "8080",
                        "Tags": ["tag1", "tag2"]
                      }'
    delete:
      tags:
        - firewall
      summary: Delete Firewall Endpoint
      description: Delete an existing endpoint from the firewall configuration.
      operationId: deleteFirewallEndpoint
      responses:
        '200':
          description: successful operation
        '404':
          description: not found
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Endpoint'
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" -X DELETE \
              "http://192.168.2.1/firewall/endpoint" \
              --data '{
                        "RuleName": "exampleRule",
                        "Disabled": false,
                        "Protocol": "tcp",
                        "IP": "192.168.2.100",
                        "Domain": "example.com",
                        "Port": "8080",
                        "Tags": ["tag1", "tag2"]
                      }'
  /firewall/multicast:
    put:
      tags:
        - firewall
      summary: Enable Multicast Port (UDP over a multicast IP/ethernet address)
      description: Configures a multicast port in the firewall.
      operationId: enableFirewallMulticastPort
      responses:
        '200':
          description: successful operation
        '400':
          description: malformed data
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MulticastPort'
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" -X PUT \
              "http://192.168.2.1/firewall/multicast" \
              --data '{
                        "Port": "1234",
                        "Upstream": true
                      }'
    delete:
      tags:
        - firewall
      summary: Disable Multicast Port
      description: Removes a multicast port configuration from the firewall.
      operationId: disableFirewallMulticastPort
      responses:
        '200':
          description: successful operation
        '404':
          description: not found
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MulticastPort'
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" -X DELETE \
              "http://192.168.2.1/firewall/multicast" \
              --data '{
                        "Port": "1234",
                        "Upstream": true
                      }'
  /firewall/custom_interface:
    put:
      tags:
        - firewall
      summary: Add Custom Interface Rule to join an interface to the network
      description: Adds a custom interface rule to the firewall.
      operationId: addFirewallCustomInterfaceRule
      responses:
        '200':
          description: successful operation
        '400':
          description: malformed data
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CustomInterfaceRule'
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" -X PUT \
              "http://192.168.2.1/firewall/custom_interface" \
              --data '{
                        "Interface": "eth0",
                        "SrcIP": "192.168.1.100",
                        "SetRoute": true,
                        "Groups": ["group1", "group2"],
                        "Tags": ["tag1", "tag2"]
                      }'
    delete:
      tags:
        - firewall
      summary: Remove Custom Interface Rule
      description: Removes a custom interface rule from the firewall.
      operationId: removeFirewallCustomInterfaceRule
      responses:
        '200':
          description: successful operation
        '404':
          description: not found
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CustomInterfaceRule'
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" -X DELETE \
              "http://192.168.2.1/firewall/custom_interface" \
              --data '{
                        "Interface": "eth0",
                        "SrcIP": "192.168.1.100",
                        "SetRoute": true,
                        "Groups": ["group1", "group2"],
                        "Tags": ["tag1", "tag2"]
                      }'
  /firewall/icmp:
    put:
      tags:
        - firewall
      summary: Configure ICMP Options
      description: Configures ICMP options in the firewall.
      operationId: configureFirewallIcmpOptions
      responses:
        '200':
          description: successful operation
        '400':
          description: malformed data
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ICMPOptions'
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" -X PUT \
              "http://192.168.2.1/firewall/icmp" \
              --data '{
                        "PingLan": true,
                        "PingWan": false
                      }'
  /subnetConfig:
    get:
      tags:
        - network
      summary: Get Subnet Configuration
      description: Retrieves the current subnet configuration.
      operationId: getSubnetConfiguration
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DHCPConfig'
        '404':
          description: not found
      security:
        - basicAuth: []
        - bearerAuth: []
    put:
      tags:
        - network
      summary: Set Subnet Configuration
      description: >-
        Sets or updates the subnet configuration. This will overwrite the
        existing configuration.
      operationId: setSubnetConfiguration
      responses:
        '200':
          description: successful operation
        '400':
          description: malformed data
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DHCPConfig'
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" -X PUT \
              "http://192.168.2.1/subnetConfig" \
              --data '{
                        "TinyNets": ["192.168.1.0/24", "192.168.2.0/24"],
                        "LeaseTime": "12h"
                      }'
  /dnsSettings:
    get:
      tags:
        - network
      summary: Get DNS Settings
      description: Retrieves the current DNS settings.
      operationId: getDnsSettings
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DNSSettings'
        '404':
          description: not found
      security:
        - basicAuth: []
        - bearerAuth: []
    put:
      tags:
        - network
      summary: Update DNS Settings
      description: >-
        Updates the DNS settings. This operation overwrites the existing
        settings.
      operationId: updateDnsSettings
      responses:
        '200':
          description: successful operation
        '400':
          description: malformed data
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DNSSettings'
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" -X PUT \
              "http://192.168.2.1/dnsSettings" \
              --data '{
                        "UpstreamTLSHost": "dns.example.com",
                        "UpstreamIPAddress": "8.8.8.8",
                        "TlsDisable": false
                      }'
  /iptraffic:
    get:
      tags:
        - traffic
      summary: Retrieve IP traffic
      description: Returns IP traffic information
      operationId: getIPTraffic
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/IPTrafficElement'
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" \
              "http://192.168.2.1/iptraffic"
  /traffic/{countermap}:
    get:
      tags:
        - traffic
      summary: Retrieve traffic for LAN/WAN
      description: >-
        Returns traffic information from the counter specified by the name
        parameter. Countermap can be one of `incoming_traffic_lan` |
        `outgoing_traffic_lan` | `outgoing_traffic_wan` |
        `incoming_traffic_wan`. See the
        [accounting.sh](https://github.com/spr-networks/super/blob/main/base/scripts/accounting.sh)
        NFT rules for additional information
      operationId: getDeviceTraffic
      parameters:
        - name: countermap
          in: path
          description: Name of counter
          required: true
          schema:
            type: string
            example: incoming_traffic_lan
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/TrafficElement'
        '400':
          description: Failed to collect traffic statistics for device
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" \
              "http://192.168.2.1/traffic/outgoing_traffic_lan"
  /traffic_history:
    get:
      tags:
        - traffic
      summary: Retrieve historical traffic data for devices
      description: Returns traffic information for all devices
      operationId: getTrafficHistory
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TrafficHistory'
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" \
              "http://192.168.2.1/traffic_history"
  /hostapd/{interface}/status:
    get:
      tags:
        - hostapd
      summary: Retrieve hostapd status
      description: Returns current status for hostapd
      operationId: hostapdStatus
      parameters:
        - name: interface
          in: path
          description: Name of wireless interface
          required: true
          schema:
            type: string
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HostapdStatus'
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" \
              "http://192.168.2.1/hostapd/status"
  /hostapd/{interface}/all_stations:
    get:
      tags:
        - hostapd
      summary: Retrieve all_stations output
      description: Returns current status for all stations
      operationId: hostapdAllStations
      parameters:
        - name: interface
          in: path
          description: Name of wireless interface
          required: true
          schema:
            type: string
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                additionalProperties:
                  x-additionalPropertiesName: '11:22:33:44:55:6'
                  $ref: '#/components/schemas/StationInfo'
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" \
              "http://192.168.2.1/hostapd/all_stations"
  /hostapd/{interface}/config:
    get:
      tags:
        - hostapd
      summary: Retrieve hostapd config
      description: Returns hostapd configuration
      operationId: hostapdGetConfiguration
      parameters:
        - name: interface
          in: path
          description: Name of wireless interface
          required: true
          schema:
            type: string
      responses:
        '200':
          description: successful operation
          content:
            text/plain:
              schema:
                type: string
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" \
              "http://192.168.2.1/hostapd/config"
    put:
      tags:
        - hostapd
      summary: Set hostapd config
      description: Set hostapd configuration
      operationId: hostapdUpdateConfiguration
      parameters:
        - name: interface
          in: path
          description: Name of wireless interface
          required: true
          schema:
            type: string
      requestBody:
        $ref: '#/components/requestBodies/HostapdConfig'
      responses:
        '200':
          description: successful operation
          content:
            text/plain:
              schema:
                type: string
      security:
        - basicAuth: []
        - bearerAuth: []
  /hostapd/{interface}/setChannel:
    put:
      tags:
        - hostapd
      summary: Set WiFi Channel
      description: Sets channel configuration
      operationId: hostapdSetChannel
      parameters:
        - name: interface
          in: path
          description: Name of wireless interface
          required: true
          schema:
            type: string
      requestBody:
        $ref: '#/components/requestBodies/ChannelParameters'
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CalculatedChannelParameters'
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" \
              "http://192.168.2.1/hostapd/config"
  /hostapd/{interface}/enable:
    put:
      tags:
        - hostapd
      summary: Enable Wireless Interface
      description: >-
        Enables a wireless interface, creating an configuration if needed, and
        starting hostapd
      operationId: hostapdEnableInterface
      parameters:
        - name: interface
          in: path
          description: Name of wireless interface
          required: true
          schema:
            type: string
      responses:
        '200':
          description: successful operation
      security:
        - basicAuth: []
        - bearerAuth: []
  /hostapd/{interface}/disable:
    put:
      tags:
        - hostapd
      summary: Disable Wireless Interface
      description: Disables a wireless interface, and restarts hostapd
      operationId: hostapdDisableInterface
      parameters:
        - name: interface
          in: path
          description: Name of wireless interface
          required: true
          schema:
            type: string
      responses:
        '200':
          description: successful operation
      security:
        - basicAuth: []
        - bearerAuth: []
  /hostapd/{interface}/resetConfiguration:
    put:
      tags:
        - hostapd
      summary: Reset Wireless Interface Configuration
      description: Resets HostAP Configuration to the Default Template
      operationId: hostapdResetInterface
      parameters:
        - name: interface
          in: path
          description: Name of wireless interface
          required: true
          schema:
            type: string
      responses:
        '200':
          description: successful operation
      security:
        - basicAuth: []
        - bearerAuth: []
  /hostapd/restart:
    put:
      tags:
        - hostapd
      summary: Restart WiFI Service
      description: Restarts all hostapd instances
      operationId: hostapdRestart
      responses:
        '200':
          description: successful operation
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" \
              "http://192.168.2.1/hostapd/config"
  /hostapd/{interface}/enableExtraBSS:
    put:
      tags:
        - hostapd
      summary: Enable Additional BSS on Interface
      description: >-
        Enables an additional BSS (Basic Service Set) on the specified
        interface. This supports WPA1, and disabled isolation. Requires card
        support
      operationId: hostapdEnableExtraBSS
      parameters:
        - name: interface
          in: path
          required: true
          description: Name of the network interface.
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ExtraBSS'
      responses:
        '200':
          description: successful operation
        '400':
          description: malformed data
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" -X PUT \
              "http://192.168.2.1/hostapd/eth0/enableExtraBSS" \
              --data '{
                        "Ssid": "ExtraSSID",
                        "Bssid": "00:11:22:33:44:55",
                        "Wpa": "2",
                        "WpaKeyMgmt": "WPA-PSK",
                        "DisableIsolation": false
                      }'
    delete:
      tags:
        - hostapd
      summary: Disable Extra BSS on Interface
      description: Disables an additional BSS on the specified interface.
      operationId: hostapdDisableExtraBSS
      parameters:
        - name: interface
          in: path
          required: true
          description: Name of the network interface.
          schema:
            type: string
      responses:
        '200':
          description: successful operation
        '404':
          description: not found
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" -X DELETE \
              "http://192.168.2.1/hostapd/eth0/enableExtraBSS"
  /interfacesConfiguration:
    get:
      tags:
        - hostapd
      summary: Retrieve interface configuration
      description: SPR Tracks the state of interfaces to decide launching hostap
      operationId: interfaceConfiguration
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/InterfaceEntry'
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" \
              "http://192.168.2.1/interfacesConfiguration"
  /reportPSKAuthFailure:
    put:
      tags:
        - unix_wifid
      summary: Report PSK auth failure
      description: ''
      operationId: reportPSKAuthFailure
      responses:
        '200':
          description: successful operation
        '400':
          description: malformed data
      requestBody:
        $ref: '#/components/requestBodies/PSKAuthFailure'
  /reportPSKAuthSuccess:
    put:
      tags:
        - unix_wifid
      summary: Report PSK auth success
      description: ''
      operationId: reportPSKAuthSuccess
      responses:
        '200':
          description: successful operation
        '400':
          description: malformed data
      requestBody:
        $ref: '#/components/requestBodies/PSKAuthSuccess'
  /interfaces:
    get:
      tags:
        - unix_wifid
      summary: Get a space separated text listing of Wireless Interfaces
      description: ''
      operationId: getInterfaces
      responses:
        '200':
          description: successful operation
          content:
            application/text:
              example:
                - wlan1 wlan2
        '400':
          description: malformed data
  /dhcpUpdate:
    put:
      tags:
        - unix_dhcpd
      summary: Update DHCP information
      description: Handle networking tasks upon a DHCP
      operationId: dhcpUpdate
      responses:
        '200':
          description: successful operation
      requestBody:
        $ref: '#/components/requestBodies/DHCPUpdate'
  /start?service={service}&compose_file={compose_file}:
    get:
      tags:
        - unix_superd
      summary: Run docker-compose up -d on a service
      parameters:
        - name: service
          in: path
          description: Name of service
          required: true
          schema:
            type: string
        - name: compose_file
          in: path
          description: Compose file to run
          required: true
          schema:
            type: string
      description: ''
      operationId: superdStartService
      responses:
        '200':
          description: successful operation
        '400':
          description: malformed data
  /restart?service={service}&compose_file={compose_file}:
    put:
      tags:
        - unix_superd
      summary: Run docker-compose restart on a service
      description: ''
      operationId: superdRestartService
      parameters:
        - name: service
          in: path
          description: Name of service
          required: true
          schema:
            type: string
        - name: compose_file
          in: path
          description: Compose file to run
          required: true
          schema:
            type: string
      responses:
        '200':
          description: successful operation
        '400':
          description: malformed data
  /update?service={service}&compose_file={compose_file}:
    get:
      tags:
        - unix_superd
      summary: Run docker-compose pull on a service
      description: ''
      operationId: superdUpdateService
      parameters:
        - name: service
          in: path
          description: Name of service
          required: true
          schema:
            type: string
        - name: compose_file
          in: path
          description: Compose file to run
          required: true
          schema:
            type: string
      responses:
        '200':
          description: successful operation
        '400':
          description: malformed data
  /stop?service={service}&compose_file={compose_file}:
    get:
      tags:
        - unix_superd
      summary: Run docker-compose stop on a service
      description: ''
      operationId: superdStopService
      parameters:
        - name: service
          in: path
          description: Name of service
          required: true
          schema:
            type: string
        - name: compose_file
          in: path
          description: Compose file to run
          required: true
          schema:
            type: string
      responses:
        '200':
          description: successful operation
        '400':
          description: malformed data
  /ghcr_auth:
    get:
      tags:
        - unix_superd
      summary: Authenticate to GHCR
      description: ''
      operationId: superdAuthenticateGHCR
      parameters:
        - name: username
          in: query
          description: username
          required: false
          schema:
            type: string
        - name: secret
          in: query
          description: Secret
          required: false
          schema:
            type: string
      responses:
        '200':
          description: successful operation
        '400':
          description: malformed data
  /update_git:
    get:
      tags:
        - unix_superd
      summary: Update PLUS extension git repostiory
      description: ''
      operationId: superdUpdateGit
      parameters:
        - name: git_url
          in: query
          description: git url to update clone into plus extensions and update
          required: false
          schema:
            type: string
      responses:
        '200':
          description: successful operation
        '400':
          description: malformed data
  /git_version:
    get:
      tags:
        - unix_superd
      summary: Get Version from git
      description: Get latest tag from git repository specified by the plugin parameter
      operationId: superGetGitVersion
      parameters:
        - name: plugin
          in: query
          description: plugin to get version for
          required: false
          schema:
            type: string
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: string
                example: v0.1.23
        '400':
          description: malformed data
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl --unix-socket \
              state/plugins/superd/socket \
              http://localhost/git_version
  /container_version:
    get:
      tags:
        - unix_superd
      summary: Get Version for docker container
      description: Get latest tag from docker specified by the container parameter
      operationId: superGetContainerVersion
      parameters:
        - name: container
          in: query
          description: container to get version for
          required: false
          schema:
            type: string
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: string
                example: 0.1.23
        '400':
          description: malformed data
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl --unix-socket \
              state/plugins/superd/socket \
              http://localhost/container_version
  /DHCPRequest:
    put:
      tags:
        - tinysubnets
      summary: DHCPRequest - Reserves an IP
      description: Reserves an IP address for plugins like wireguard to assign to clients
      operationId: DHCPRequest
      responses:
        '200':
          description: successful operation
      requestBody:
        $ref: '#/components/requestBodies/AbstractDHCPRequest'
  /wireguardUpdate:
    put:
      tags:
        - unix_wireguard
      summary: Update Wireguard Peer
      description: Handle networking tasks for a new wireguard peer
      operationId: newWireguardUpdate
      responses:
        '200':
          description: successful operation
      requestBody:
        $ref: '#/components/requestBodies/WireguardUpdate'
    delete:
      tags:
        - unix_wireguard
      summary: Delete wireguard peer
      description: Handle networking tasks for removing a wireguard peer
      operationId: delWireguardUpdate
      responses:
        '200':
          description: successful operation
      requestBody:
        $ref: '#/components/requestBodies/WireguardUpdate'
  /plugins:
    get:
      tags:
        - plugins
      summary: Get Plugins
      description: Get a list of all the plugins
      operationId: showPlugins
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/PluginEntry'
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" \
              "http://192.168.2.1/plugins"
  /plugins/{name}:
    put:
      tags:
        - plugins
      summary: Add or Update Plugin
      description: Add or update a plugin specified by the name parameter
      operationId: updatePlugin
      parameters:
        - name: name
          in: path
          description: plugin name
          required: true
          schema:
            type: string
            example: dns-block
      requestBody:
        $ref: '#/components/requestBodies/PluginEntry'
      responses:
        '200':
          description: successful operation
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" -X PUT  \
              "http://192.168.2.1/plugins/dns-block" \
              --data '{"Enabled": false}'
    delete:
      tags:
        - plugins
      summary: Delete Plugin
      description: Delete plugin specified by the name parameter
      operationId: deletePlugin
      parameters:
        - name: name
          in: path
          description: plugin name
          required: true
          schema:
            type: string
            example: dns-block
      responses:
        '200':
          description: successful operation
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" -X DELETE  \
              "http://192.168.2.1/plugins/plugin-test" \
              --data '{}'
  /plugins/dns/block/config:
    get:
      tags:
        - dnsblock
      summary: Retrieve coredns-block config
      description: Returns coredns-block config
      operationId: showConfig
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: string
                example: config
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" \
              "http://192.168.2.1/plugins/dns/block/config"
  /plugins/dns/block/override:
    put:
      tags:
        - dnsblock
      summary: Add override domain
      description: Add domain to be blocked/permitted by DNS
      operationId: addBlockDomains
      requestBody:
        $ref: '#/components/requestBodies/DNSDomainOverride'
      responses:
        '200':
          description: successful operation
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" -X PUT  \
              "http://192.168.2.1/plugins/dns/block/override" \
              --data '{"Type": "Permit", "Domain": "example.com.", "ResultIP": "1.1.1.1", "ClientIP": "*", "Expiration": 0}'
    delete:
      tags:
        - dnsblock
      summary: Delete override domain
      description: Delete domain to be blocked/permitted by DNS
      operationId: deleteBlockDomains
      requestBody:
        $ref: '#/components/requestBodies/DNSDomainOverride'
      responses:
        '200':
          description: successful operation
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" -X DELETE  \
              "http://192.168.2.1/plugins/dns/block/override" \
              --data '{"Domain": "example.com.", "Type": "Permit"}'
  /plugins/dns/block/blocklist:
    get:
      tags:
        - dnsblock
      summary: Retrieve blocklists
      description: Returns blocklist URIs
      operationId: showDNSBlocklist
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/DNSListEntry'
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" \
              "http://192.168.2.1/plugins/dns/block/blocklist"
    put:
      tags:
        - dnsblock
      summary: Add blocklist
      description: Add blocklist entry
      operationId: addDNSBlocklist
      requestBody:
        $ref: '#/components/requestBodies/DNSListEntry'
      responses:
        '200':
          description: successful operation
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" -X PUT  \
              "http://192.168.2.1/plugins/dns/block/blocklist" \
              --data '{"URI": "http://asdf.com", "Enabled": true}'
    delete:
      tags:
        - dnsblock
      summary: Delete blocklist entry
      description: Delete a blocklist entry
      operationId: deleteDNSBlocklist
      requestBody:
        $ref: '#/components/requestBodies/DNSListEntry'
      responses:
        '200':
          description: successful operation
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" -X DELETE  \
              "http://192.168.2.1/plugins/dns/block/blocklist" \
              --data '{"URI": "http://asdf.com"}'
  /plugins/dns/block/exclusions:
    get:
      tags:
        - dnsblock
      summary: Retrieve IPs excluded from blocking
      description: Returns IPs excluded from DNS block
      operationId: showDNSExclusions
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string
                example:
                  - 192.168.2.102
                  - 192.168.2.112
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" \
              "http://192.168.2.1/plugins/dns/block/exclusions"
    put:
      tags:
        - dnsblock
      summary: Add IP to exclude
      description: Add IP address to exclusion list
      operationId: addDNSExclusion
      requestBody:
        content:
          application/json:
            schema:
              type: string
              description: ip to exclude
              example: 192.168.2.102
      responses:
        '200':
          description: successful operation
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" -X PUT  \
              "http://192.168.2.1/plugins/dns/block/exclusions" \
              --data '"192.168.2.102"'
    delete:
      tags:
        - dnsblock
      summary: Delete IP from exclusion list
      description: Delete IP address from exclusion list
      operationId: deleteDNSExclusion
      requestBody:
        content:
          application/json:
            schema:
              type: string
              description: ip to delete exclude for
              example: 192.168.2.102
      responses:
        '200':
          description: successful operation
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" -X DELETE  \
              "http://192.168.2.1/plugins/dns/block/exclusions" \
              --data '"192.168.2.102"'
  /plugins/dns/block/dump_domains:
    get:
      tags:
        - dnsblock
      summary: Dump all domains loaded from block lists
      description: Returns aggregate list of all block domains
      operationId: dumpDNSEntries
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string
                example:
                  - asdf.com
                  - example.com
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: >
            curl -u "admin:pass"
            "http://192.168.2.1/plugins/dns/block/dump_domains"
  /plugins/dns/block/metrics:
    get:
      tags:
        - dnsblock
      summary: Get metrics
      description: Returns metrics for DNS block
      operationId: getDNSMetrics
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DNSBlockMetrics'
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" \
              "http://192.168.2.1/plugins/dns/block/metrics"
  /plugins/dns/log/config:
    get:
      tags:
        - dnslog
      summary: Retrieve coredns-jsonlog configuration
      operationId: showDnsLogConfig
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                example:
                  - HostPrivacyIPList:
                      - 192.168.1.10
                  - DomainIgnoreList:
                      - asdf.com
                      - asdf2.com
                      - test.com.
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" \
              "http://192.168.2.1/plugins/dns/log/config"
  /plugins/dns/log/host_privacy_list:
    get:
      tags:
        - dnslog
      summary: Retrieve list of privacy hosts
      description: List of hosts to exclude from DNS Log
      operationId: showHostPrivacyList
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: string
                example:
                  - 192.168.1.10
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" \
              "http://192.168.2.1/plugins/dns/log/host_privacy_list"
    put:
      tags:
        - dnslog
      summary: Set the list of privacy hosts
      operationId: setHostPrivacyList
      requestBody:
        content:
          application/json:
            schema:
              type: array
              items:
                type: string
      responses:
        '200':
          description: successful operation
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" -X PUT  \
              "http://192.168.2.1/plugins/dns/log/host_privacy_list" \
              --data '["192.168.1.10", "192.168.1.14"]'
  /plugins/dns/log/domain_ignores:
    get:
      tags:
        - dnslog
      summary: Retrieve list of domains to exclude from logging
      operationId: getDomainIgnores
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: string
                example:
                  - localhost
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" \
              "http://192.168.2.1/plugins/dns/log/domain_ignores"
  /plugins/dns/log/domain_ignore/{domain}:
    put:
      tags:
        - dnslog
      summary: Add domain to exclude from logs
      operationId: addDomainIgnore
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
      security:
        - basicAuth: []
        - bearerAuth: []
      parameters:
        - name: domain
          in: path
          description: domain name
          required: true
          schema:
            type: string
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" -X PUT \
              "http://192.168.2.1/plugins/dns/log/domain_ignore/example.com"
    delete:
      tags:
        - dnslog
      summary: Remove domain from exclude list
      operationId: deleteDomainIgnore
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string
      security:
        - basicAuth: []
        - bearerAuth: []
      parameters:
        - name: domain
          in: path
          description: domain name
          required: true
          schema:
            type: string
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" -X DELETE \
              "http://192.168.2.1/plugins/dns/log/domain_ignore/example.com"
  /plugins/dns/log/history/{ip}:
    get:
      tags:
        - dnslog
      summary: Retrieve recent DNS history for a given IP
      operationId: getDNSHistory
      parameters:
        - name: ip
          in: path
          description: ip address
          required: true
          schema:
            type: string
            example: 1.1.1.1
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                example:
                  - Q:
                      - Name: supernetworks.org.
                        Qtype: 1
                        Qclass: 1
                    A:
                      - Hdr:
                          Name: supernetworks.org.
                          Rrtype: 1
                          Class: 1
                          Ttl: 30
                          Rdlength: 4
                        A: 172.67.71.52
                      - Hdr:
                          Name: supernetworks.org.
                          Rrtype: 1
                          Class: 1
                          Ttl: 30
                          Rdlength: 4
                        A: 104.26.7.38
                      - Hdr:
                          Name: supernetworks.org.
                          Rrtype: 1
                          Class: 1
                          Ttl: 30
                          Rdlength: 4
                        A: 104.26.6.38
                    Type: NOERROR
                    FirstName: supernetworks.org.
                    FirstAnswer: 172.67.71.52
                    Local: '[::]:53'
                    Remote: 127.0.0.1:60237
                    Timestamp: '2022-03-28T21:47:49.563958-07:00'
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" \
              "http://192.168.2.1/plugins/dns/log/history/192.168.1.10"
    delete:
      tags:
        - dnslog
      summary: Delete Device History by IP
      description: Delete device history in the IP parameter
      operationId: deleteDNSHistory
      parameters:
        - name: ip
          in: path
          description: ip address
          required: true
          schema:
            type: string
            example: 1.1.1.1
      responses:
        '200':
          description: successful operation
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" -X DELETE \
              "http://192.168.2.1/plugins/dns/log/history/192.168.1.10"
  /tokens:
    get:
      tags:
        - tokens
      summary: Get API Tokens
      description: Get an array of all tokens
      operationId: getTokens
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Token'
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" \
              "http://192.168.2.1/tokens"
    put:
      tags:
        - tokens
      summary: Add API Token
      description: >-
        Create a new token. If Expire is 0 or undefined the Token will never
        expire
      operationId: addToken
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Token'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                Expire:
                  type: integer
                ScopedPaths:
                  type: array
                  items:
                    type: string
                  example:
                    - /status
                    - /docker/info
            example:
              Expire: 1656440879
              ScopedPaths:
                - /status
                - /docker/info
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" -X PUT \
              "http://192.168.2.1/tokens" --data {"ScopedPaths": ["/status", "/docker/info"]}
    delete:
      tags:
        - tokens
      summary: Delete API Token
      description: Delete token specified by the Token parameter
      operationId: deleteToken
      responses:
        '200':
          description: successful operation
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                Token:
                  type: string
            example:
              Token: dG9rbnRva250b2tudG9rbnRva250b2tudG9rbnRva24K
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" -X DELETE \
              "http://192.168.2.1/tokens" --data '{"Token": "b64Token"}'
  /status:
    get:
      tags:
        - general
      summary: Get Status
      description: Returns "Online". Can be used to test authentication
      operationId: getStatus
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: string
                example: Online
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" \
              "http://192.168.2.1/status"
  /features:
    get:
      tags:
        - general
      summary: Get Features
      description: Returns an array of features
      operationId: getFeatures
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string
                example:
                  - wifi
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" \
              "http://192.168.2.1/status"
  /version:
    get:
      tags:
        - general
      summary: Get Version
      description: >-
        Get latest tag from docker specified by the container parameter. If no
        container is specified version is fetched for superd
      operationId: getVersion
      parameters:
        - name: container
          in: query
          description: container to get version for
          required: false
          schema:
            type: string
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: string
                example: 0.1.23
        '400':
          description: malformed data
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" \
              "http://192.168.2.1/version"
  /release:
    get:
      tags:
        - releases
      summary: Get release settings
      description: >-
        Returns an object with the current SPR version and Channel, Version
        settings
      operationId: getRelease
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  CustomChannel:
                    type: string
                  CustomVersion:
                    type: string
                  Current:
                    type: string
                example:
                  CustomChannel: '-dev'
                  CustomVersion: 0.1.2
                  Current: 0.1.2-dev
        '400':
          description: malformed data
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" \
              "http://192.168.2.1/release"
    put:
      tags:
        - releases
      summary: Set release settings
      description: Set a custom Channel, Version to update into
      operationId: putRelease
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                CustomChannel:
                  type: string
                CustomVersion:
                  type: string
                Current:
                  type: string
              example:
                CustomChannel: '-dev'
                CustomVersion: 0.1.3
      responses:
        '200':
          description: successful operation
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -X PUT -u "admin:pass" \
              "http://192.168.2.1/release" \
              --data '{"CustomChannel":"-dev","CustomVersion":"0.1.29"}'
    delete:
      tags:
        - releases
      summary: Reset release settings
      description: Clear out custom release and channel
      operationId: deleteReleaseSettings
      responses:
        '200':
          description: successful operation
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" -X DELETE \
              "http://192.168.2.1/release"
  /releaseChannels:
    get:
      tags:
        - releases
      summary: Get Release Channels
      description: Get configured release channels
      operationId: getReleaseChannels
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string
                example:
                  - main
                  - '-dev'
        '400':
          description: malformed data
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" \
              "http://192.168.2.1/releaseChannels"
  /releasesAvailable:
    get:
      tags:
        - releases
      summary: Get releases available
      description: Returns a list of tags available to update into
      operationId: getReleasesAvailable
      parameters:
        - name: container
          in: path
          description: Container name
          required: true
          schema:
            type: string
          example: super_superd
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string
                example:
                  - latest
                  - 0.1.23
                  - 0.1.23-dev
        '400':
          description: malformed data
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" \
              "http://192.168.2.1/releaseChannels"
  /update:
    put:
      tags:
        - releases
      summary: Trigger update
      description: >-
        SPR will run a self update, to the configured release Channel and
        Version (latest by default)
      operationId: putUpdate
      responses:
        '200':
          description: successful operation
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -X PUT -u "admin:pass" \
              "http://192.168.2.1/update"
  /speedtest:
    get:
      tags:
        - general
      summary: Test download speed to Web API
      operationId: speedTestDownload
      security:
        - basicAuth: []
        - bearerAuth: []
      responses:
        '200':
          description: successful operationId
          content:
            text/plain:
              schema:
                type: string
    put:
      tags:
        - general
      summary: Test upload speed to Web API
      operationId: speedTestUpload
      security:
        - basicAuth: []
        - bearerAuth: []
      requestBody:
        content:
          text/plain:
            schema:
              type: string
      responses:
        '200':
          description: successful operationId
          content:
            text/plain:
              schema:
                type: string#
  /logs:
    get:
      tags:
        - general
      summary: Retreive System Logs
      description: |
        Returns the output of journalctl in json format
      operationId: getLogs
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  example:
                    CONTAINER_NAME: superapi
                    MESSAGE: 192.168.2.101:1234 GET /logs
                    __REALTIME_TIMESTAMP: 1651066188615770
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" \
              "http://192.168.2.1/logs"
  /notifications:
    get:
      tags:
        - notifications
      summary: Get Notifications
      description: Get list of conditions for notifications
      operationId: getNotifications
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Notification'
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" \
              "http://192.168.2.1/notifications"
    put:
      tags:
        - notifications
      summary: Add Notification
      description: At least one condition is required to identify the packet
      operationId: addNotification
      requestBody:
        $ref: '#/components/requestBodies/Notification'
      responses:
        '200':
          description: successful operation
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" -X PUT \
              "http://192.168.2.1/notifications" --data '{"Conditions": {"Prefix": "drop:input"}, "Notification": true}'
  /notifications/{id}:
    put:
      tags:
        - notifications
      summary: Update Notification
      description: At least one condition is required to identify the packet
      operationId: updateNotification
      parameters:
        - name: id
          in: path
          description: Notication ID
          required: true
          schema:
            type: integer
      requestBody:
        $ref: '#/components/requestBodies/Notification'
      responses:
        '200':
          description: successful operation
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" -X PUT \
              "http://192.168.2.1/notifications/1" < notification.json
    delete:
      tags:
        - notifications
      summary: Delete Notification
      description: Delete notification with numeric index specified by the id parameter
      operationId: deleteNotification
      parameters:
        - name: id
          in: path
          description: Notication ID
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: successful operation
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" -X DELETE \
              "http://192.168.2.1/notifications/1"
  /startPlusExtension:
    get:
      tags:
        - plus
      summary: Start PLUS extension
      description: Start a PLUS extension. Currently this is the pfw plugin
      operationId: plusStart
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Notification'
      security:
        - basicAuth: []
        - bearerAuth: []
      parameters:
        - name: name
          in: query
          description: Name of plus extension
          required: false
          schema:
            type: string
            example: pfw
  /stopPlusExtension:
    get:
      tags:
        - plus
      summary: Stop PLUS extension
      description: Stop a PLUS extension. Currently this is the pfw plugin
      operationId: plusStop
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Notification'
      security:
        - basicAuth: []
        - bearerAuth: []
      parameters:
        - name: name
          in: query
          description: Name of plus extension
          required: false
          schema:
            type: string
            example: pfw
  /plusToken:
    get:
      tags:
        - plus
      summary: Get PLUS token
      description: Get the configured PLUS token
      operationId: plusGetToken
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: string
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" \
              "http://192.168.2.1/tokens"
    put:
      tags:
        - plus
      summary: Set PLUS token
      description: Configure a PLUS token and trigger PLUS installation
      operationId: plusSetToken
      responses:
        '200':
          description: successful operation
      requestBody:
        content:
          application/json:
            schema:
              type: string
            example: plus_token
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" -X PUT \
              "http://192.168.2.1/tokens" --data {}
  /plugins/wireguard/peers:
    get:
      tags:
        - wireguard
      summary: Peers
      description: Returns a list of peers connected to Wireguard
      operationId: getWireguardPeers
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/WireguardPeer'
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" \
              "http://192.168.2.1/plugins/wireguard/peers"
  /plugins/wireguard/peer:
    put:
      tags:
        - wireguard
      summary: Peer
      description: Creates a new peer
      operationId: addWireguardPeer
      requestBody:
        $ref: '#/components/requestBodies/WireguardPeer'
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WireguardConfig'
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" -X PUT \
              "http://192.168.2.1/plugins/wireguard/peer" --data '{}'
  /plugins/wireguard/config:
    get:
      tags:
        - wireguard
      summary: Config
      description: Return Wireguard server config
      operationId: getWireguardConfig
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: string
                example: |
                  [Interface]
                  Address = 192.168.3.1/24
                  ListenPort = 51280
                  PrivateKey = 6KVVbcmXanU/6mByHy17eNO9DXe9BQJWOyaA204JYH4=

                  [Peer]
                  PublicKey = 7SdFRh8o76RjUn/y4c7cQgCcCXA85s47/gVAdem3bBI=
                  PresharedKey = w9bfMAfqRnLjnlHofX+JSzaRDADrW1tvyW1UWzXJjrg=
                  AllowedIPs = 192.168.3.2/32
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" \
              "http://192.168.2.1/plugins/wireguard/config"
  /plugins/wireguard/status:
    get:
      tags:
        - wireguard
      summary: Status
      description: Return Wireguard server and peer status
      operationId: getWireguardStatus
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                example:
                  wg0:
                    privateKey: 6KVVbcmXanU/6mByHy17eNO9DXe9BQJWOyaA204JYH4=
                    publicKey: 7SdFRh8o76RjUn/y4c7cQgCcCXA85s47/gVAdem3bBI=
                    listenPort: 51280,
                    peers:
                      HvtqvLJ1F33eHmR5Yk9PLZfTHg7w6sazPZtZi9u8pBQ=:
                        presharedKey: w9bfMAfqRnLjnlHofX+JSzaRDADrW1tvyW1UWzXJjrg=
                        allowedIps:
                          - 192.168.3.2/32
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" \
              "http://192.168.2.1/plugins/wireguard/status"
  /plugins/wireguard/up:
    put:
      tags:
        - wireguard
      summary: Up
      description: Start Wireguard if not running
      operationId: wireguardUp
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: boolean
                example: true
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" -X PUT \
              "http://192.168.2.1/plugins/wireguard/up"
  /plugins/wireguard/down:
    put:
      tags:
        - wireguard
      summary: Down
      description: Stop Wireguard if running
      operationId: wireguardDown
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: boolean
                example: true
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" -X PUT \
              "http://192.168.2.1/plugins/wireguard/down"
  /plugins/lookup/asn/{ips}:
    get:
      tags:
        - lookup
      summary: IP ASN
      description: Get ASN information for IP address
      operationId: lookupASNIPs
      parameters:
        - name: ips
          in: path
          description: ip address list, separated by ,
          required: true
          schema:
            type: string
            example: 1.1.1.1,2.2.2.2
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LookupASN'
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" \
              "http://192.168.2.1/plugins/lookup/asn/1.1.1.1"
  /plugins/lookup/asns/{ips}:
    get:
      tags:
        - lookup
      summary: IPs ASN
      description: Get ASN information for IPs separated by ,
      operationId: lookupASNsIPs
      parameters:
        - name: ips
          in: path
          description: ip address list, separated by ,
          required: true
          schema:
            type: string
            example: 1.1.1.1,2.2.2.2
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/LookupASN'
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" \
              "http://192.168.2.1/plugins/lookup/asns/1.1.1.1,8.8.8.8"
  /plugins/lookup/oui/{mac}:
    get:
      tags:
        - lookup
      summary: MAC OUI
      description: Get OUI vendor information for MAC address
      operationId: lookupOUI
      parameters:
        - name: mac
          in: path
          description: MAC address
          required: true
          schema:
            type: string
            example: '11:22:33:44:55:66'
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                example:
                  MAC: '00:11:22:33:44:66'
                  Vendor: CIMSYS
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" \
              "http://192.168.2.1/plugins/lookup/oui/00:11:22:33:44:55"
  /plugins/lookup/ouis/{macs}:
    get:
      tags:
        - lookup
      summary: MACs OUI
      description: Get OUI vendor information for MACs separated by ,
      operationId: lookupOUIs
      parameters:
        - name: macs
          in: path
          description: MAC address list separated by ,
          required: true
          schema:
            type: string
            example: '00:11:22:33:44:66'
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                example:
                  - MAC: '00:11:22:33:44:66'
                    Vendor: CIMSYS
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" \
              "http://192.168.2.1/plugins/lookup/ouis/00:11:22:33:44:66"
  /plugins/dyndns/config:
    get:
      tags:
        - dyndns
      summary: Retrieve dyndns configuration
      description: Returns the dyndns configuration
      operationId: showDyndnsConfig
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GodyndnsConfig'
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" \
              "http://192.168.2.1/plugins/dyndns/config"
    put:
      tags:
        - dyndns
      summary: Updates the dyndns config
      operationId: updateDyndnsConfig
      requestBody:
        $ref: '#/components/requestBodies/GodyndnsConfig'
      responses:
        '200':
          description: successful operation
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" \
              "http://192.168.2.1/plugins/dyndns/config"
  /plugins/dyndns/refresh:
    get:
      tags:
        - dyndns
      summary: Refresh the dyndns client
      description: Runs a dyndns update
      operationId: refreshDyndns
      responses:
        '200':
          description: successful operation
      security:
        - basicAuth: []
        - bearerAuth: []
      x-codeSamples:
        - lang: cURL
          label: CLI
          source: |
            curl -u "admin:pass" \
              "http://192.168.2.1/plugins/dyndns/refresh"
components:
  schemas:
    GroupEntry:
      type: object
      properties:
        Name:
          description: Unique Group Name
          type: string
          example: vpn
        Disabled:
          description: If Group is disabled
          type: bool
          example: false
        GroupTags:
          description: Tags for Group
          type: array
          items:
            type: string
            example:
              - private
      xml:
        name: Group
    GroupEntryArray:
      type: array
      items:
        $ref: '#/components/schemas/GroupEntry'
    DeviceEntry:
      type: object
      properties:
        Name:
          description: Client Name
          type: string
          example: rpi4
        MAC:
          description: HW address
          type: string
          example: '11:22:33:44:55:61'
        WGPubKey:
          description: PubKey
          type: string
          example: pubkey
        VLANTag:
          description: VLANTag
          type: string
          example: vlantag
        RecentIP:
          description: RecentIP
          type: string
          example: 192.168.2.102
        PSKEntry:
          description: PSK Entry
          $ref: '#/components/schemas/PSKEntry'
        Groups:
          description: Groups for Device
          type: array
          items:
            type: string
          example:
            - lan
            - dns
        DeviceTags:
          description: Tags for Device
          type: array
          items:
            type: string
          example:
            - private
      xml:
        name: Device
    DeviceEntryMap:
      type: object
      additionalProperties:
        x-additionalPropertiesName: '11:22:33:44:55:6'
        $ref: '#/components/schemas/DeviceEntry'
    Interface:
      type: object
      properties:
        ifindex:
          type: integer
          example: 1
        ifname:
          type: string
          example: eth0
        flags:
          type: array
          items:
            type: string
            example: BROADCAST
        mtu:
          type: integer
          example: 1550
        qdisc:
          type: string
          example: mq
        operstate:
          type: string
          example: UP
        group:
          type: string
          example: default
        txqlen:
          type: integer
          example: 1000
        link_type:
          type: string
          example: ether
        address:
          description: HW address
          type: string
          example: '11:22:33:44:55:66'
        broadcast:
          description: HW address
          type: string
          example: ff:ff:ff:ff:ff:ff
        addr_info:
          type: array
          items:
            type: object
            properties:
              family:
                type: string
                example: inet6
              local:
                type: string
                example: '::1'
              prefixlen:
                type: integer
                example: 64
              scope:
                type: string
                example: link
              valid_life_time:
                type: integer
                example: 4294967295
              preferred_life_time:
                type: integer
                example: preferred_life_time
    ArpEntry:
      type: object
      properties:
        IP:
          type: string
          example: 192.168.2.142
        HWType:
          type: string
          example: '0x1'
        Flags:
          type: string
          example: '0x6'
        MAC:
          type: string
          example: '11:22:33:44:55:66'
        Mask:
          type: string
          example: '*'
        Device:
          type: string
          example: wlan1.4097
    PSKEntry:
      type: object
      properties:
        Type:
          description: sae for WPA3 or wpa for WPA2
          type: string
          enum:
            - sae
            - wpa
        Psk:
          description: Password
          type: string
          example: password
      xml:
        name: PSKEntry
    PSKAuthFailure:
      type: object
      properties:
        Type:
          type: string
          example: sae
        MAC:
          type: string
          pattern: /^([0-9A-Fa-f]{2}[:-]){5}([0-9A-Fa-f]{2})$/
          example: '11:22:33:44:55:66'
        Reason:
          type: string
          example: mismatch
        Status:
          type: string
          example: Okay
    PSKAuthSuccess:
      type: object
      properties:
        Iface:
          type: string
          example: wlan1
        Event:
          type: string
          example: AP-STA-CONNECTED
        MAC:
          type: string
          pattern: /^([0-9A-Fa-f]{2}[:-]){5}([0-9A-Fa-f]{2})$/
          example: '11:22:33:44:55:66'
        Status:
          type: string
          example: Okay
    TrafficElement:
      type: object
      properties:
        IP:
          type: string
          example: 192.168.2.1
        Packets:
          type: integer
          example: 7544
        Bytes:
          type: integer
          example: 824606
    IPTrafficElement:
      type: object
      properties:
        Interface:
          type: string
          example: wlan1
        Src:
          type: string
          pattern: /^(?:[0-9]{1,3}\.){3}[0-9]{1,3}$/
          example: 192.168.2.100
        Dst:
          type: string
          pattern: /^(?:[0-9]{1,3}\.){3}[0-9]{1,3}$/
          example: 192.168.2.102
        Packets:
          type: integer
          example: 1024
        Bytes:
          type: integer
          example: 4096
    NetCount:
      type: object
      properties:
        LanIn:
          type: integer
          example: 11125256532
        LanOut:
          type: integer
          example: 292437928
        WanIn:
          type: integer
          example: 52664
        WanOut:
          type: integer
          example: 52664
    TrafficHistory:
      type: object
      additionalProperties:
        x-additionalPropertiesName: 192.168.2.1
        $ref: '#/components/schemas/NetCount'
    DHCPUpdate:
      type: object
      properties:
        IP:
          type: string
          pattern: /^(?:[0-9]{1,3}\.){3}[0-9]{1,3}$/
          example: 192.168.2.102
        MAC:
          type: string
          pattern: /^([0-9A-Fa-f]{2}[:-]){5}([0-9A-Fa-f]{2})$/
          example: '11:22:33:44:55:66'
        Name:
          type: string
          example: rpi4
        Iface:
          type: string
          example: wlan1
        Router:
          type: string
          pattern: /^(?:[0-9]{1,3}\.){3}[0-9]{1,3}$/
          example: 192.168.2.1
    WireguardUpdate:
      type: object
      properties:
        IP:
          type: string
          pattern: /^(?:[0-9]{1,3}\.){3}[0-9]{1,3}$/
          example: 192.168.2.102
        PublicKey:
          description: Base64 public key
          type: string
          example: 7SdFRh8o76RjUn/y4c7cQgCcCXA85s47/gVAdem3bBI=
        Iface:
          type: string
          example: wg0
        Name:
          type: string
          example: wfh-laptop
    AbstractDHCPRequest:
      type: object
      properties:
        Identifier:
          type: string
          example: 7SdFRh8o76RjUn/y4c7cQgCcCXA85s47/gVAdem3bBI=
    FirewallForward:
      type: object
      properties:
        DstIP:
          type: string
          example: 1.2.3.4
        SrcIP:
          type: string
          example: 0.0.0.0/24
        SrcPort:
          type: string
          pattern: /any|[0-9]+/
          example: 0-10
        DstPort:
          type: string
          pattern: /any|[0-9]+/
          example: any
        Protocol:
          type: string
          pattern: /udp|tcp/
          example: tcp
    FirewallBlock:
      type: object
      properties:
        DstIP:
          type: string
          example: 1.2.3.4
        SrcIP:
          type: string
          example: 0.0.0.0/24
        Protocol:
          type: string
          pattern: /udp|tcp/
          example: tcp
    FirewallBlockForward:
      type: object
      properties:
        DstIP:
          type: string
          example: 1.2.3.4
        SrcIP:
          type: string
          example: 0.0.0.0/24
        DstPort:
          type: string
          example: 0-65535
        Protocol:
          type: string
          pattern: /udp|tcp/
          example: tcp
    ServicePort:
      type: object
      properties:
        UpstreamEnabled:
          type: boolean
          description: Reachable from WAN/Upstream Interface
          example: false
        Port:
          type: string
          example: '22'
        Protocol:
          type: string
          pattern: /tcp/
          example: tcp
          description: Only TCP services are currently supported
    Endpoint:
      type: object
      properties:
        RuleName:
          type: string
        Disabled:
          type: boolean
        Protocol:
          type: string
        IP:
          type: string
          example: 1.2.3.4
        Domain:
          type: string
          example: www.domain.com
        Port:
          type: string
          example: '22'
        Tags:
          description: Tags for Device
          type: array
          items:
            type: string
          example:
            - private
    MulticastPort:
      type: object
      properties:
        Upstream:
          description: Reachable from Uplinks
          type: boolean
        Port:
          type: string
          example: '22'
    CustomInterfaceRule:
      type: object
      properties:
        Interface:
          type: string
          description: interface name
          example: wlan1
        SrcIP:
          type: string
          description: IP or CIDR assigned to interface
          example: 172.16.0.0/16
        SetRoute:
          type: boolean
          description: >-
            Assign default route for SrcIP to go to interface. Docker does this
            already so may not be needed
        Groups:
          description: Groups for Interface
          type: array
          items:
            type: string
          example:
            - lan
            - dns
        Tags:
          description: Tags to apply. NOTE, no impact for now
          type: array
          items:
            type: string
          example:
            - private
    ICMPOptions:
      type: object
      properties:
        PingLan:
          description: Allow ping from LAN
          type: boolean
          example: true
        PingWan:
          description: Allow ping from WAN/upstream
          type: boolean
          example: false
      required:
        - PingLan
        - PingWan
    DHCPConfig:
      type: object
      properties:
        TinyNets:
          type: array
          items:
            type: string
          description: List of subnet pools.
        LeaseTime:
          type: string
          description: Duration of the DHCP lease time.
      required:
        - TinyNets
        - LeaseTime
    DNSSettings:
      type: object
      properties:
        UpstreamTLSHost:
          type: string
          description: DNS name of the upstream TLS host.
        UpstreamIPAddress:
          type: string
          description: IP address of the upstream DNS server.
        TlsDisable:
          type: boolean
          description: Flag to disable TLS.
      required:
        - UpstreamTLSHost
        - UpstreamIPAddress
        - TlsDisable
    InterfaceEntry:
      type: object
      properties:
        Name:
          type: string
          description: interface name
          example: wlan1
        Type:
          type: string
          description: interface type. Currently "Uplink" and "AP" are supported
          example: AP
        Enabled:
          type: boolean
          description: >-
            If the interface is enabled or not. Only has an effect for "AP" type
            for now
          example: true
    WPASupplicantConfig:
      type: object
      properties:
        WPAs:
          type: array
          items:
            $ref: '#/components/schemas/WPAIface'
    WPAIface:
      type: object
      properties:
        Iface:
          type: string
        Enabled:
          type: boolean
        Networks:
          type: array
          items:
            $ref: '#/components/schemas/WPANetwork'
    WPANetwork:
      type: object
      properties:
        Disabled:
          type: boolean
        Password:
          type: string
        SSID:
          type: string
        KeyMgmt:
          type: string
        Priority:
          type: string
          nullable: true
        BSSID:
          type: string
          nullable: true
    PPPConfig:
      type: object
      properties:
        PPPs:
          type: array
          items:
            $ref: '#/components/schemas/PPPIface'
    PPPIface:
      type: object
      properties:
        Iface:
          type: string
        PPPIface:
          type: string
        Enabled:
          type: boolean
        Username:
          type: string
        Secret:
          type: string
        VLAN:
          type: string
          nullable: true
        MTU:
          type: string
          nullable: true
    ExtraBSS:
      type: object
      properties:
        Ssid:
          type: string
        Bssid:
          type: string
        Wpa:
          type: string
        WpaKeyMgmt:
          type: string
        DisableIsolation:
          type: boolean
    InterfaceConfig:
      type: object
      properties:
        Name:
          type: string
        Enabled:
          type: boolean
        DisableDHCP:
          type: boolean
          nullable: true
        IP:
          type: string
          nullable: true
        Router:
          type: string
          nullable: true
        VLAN:
          type: string
          nullable: true
    BasicInterfaceConfig:
      type: object
      properties:
        Name:
          type: string
          description: Interface name on system
        Type:
          type: string
          enum:
            - AP
            - Uplink
            - Downlink
            - Other
        Subtype:
          type: string
        Enabled:
          type: boolean
    PluginEntry:
      type: object
      properties:
        Name:
          type: string
          description: plugin name
          example: dns-block
        URI:
          type: string
          description: plugin URI
          example: dns/block
        UnixPath:
          type: string
          description: plugin path for unix socket
          example: /state/dns/dns_block_plugin
        ComposeFilePath:
          type: string
          description: relative path to docker compose file
          example: plugins/plugin/docker-compose.yml
        Enabled:
          type: boolean
          description: plugin state
          example: true
          required: false
    DNSDomainOverride:
      type: object
      properties:
        Type:
          type: string
          description: type of override (permit or block)
          example: permit
        Domain:
          type: string
          description: domain name to override
          example: example.com
        ResultIP:
          type: string
          description: ip to return
          example: 1.2.3.4
          pattern: /^(?:[0-9]{1,3}\.){3}[0-9]{1,3}$/
        ClientIP:
          type: string
          description: target to apply to, '*' for all
          example: 192.168.2.102
          pattern: /^(?:[0-9]{1,3}\.){3}[0-9]{1,3}$/
        Expiration:
          type: integer
          description: if non zero has unix time for when the entry should disappear
          example: 0
    DNSListEntry:
      type: object
      properties:
        URI:
          type: string
          example: http://asdf.com/
        Enabled:
          type: boolean
          example: true
    DNSBlockMetrics:
      type: object
      properties:
        TotalQueries:
          type: integer
          example: 1024
        BlockedQueries:
          type: integer
          example: 512
        BlockedDomains:
          type: integer
          example: 1000
    HostapdStatus:
      type: object
      properties:
        beacon_int:
          type: string
          example: '100'
        bss[0]:
          type: string
          example: wlan1
        bssid[0]:
          type: string
          example: 00:c0:ca:33:11:22
        cac_time_left_seconds:
          type: string
          example: N/A
        cac_time_seconds:
          type: string
          example: '0'
        channel:
          type: string
          example: '36'
        dtim_period:
          type: string
          example: '2'
        edmg_channel:
          type: string
          example: '0'
        edmg_enable:
          type: string
          example: '0'
        freq:
          type: string
          example: '5180'
        ht_caps_info:
          type: string
          example: 01ff
        ht_mcs_bitmask:
          type: string
          example: ffff0000000000000000
        ht_op_mode:
          type: string
          example: '0x6'
        ieee80211ac:
          type: string
          example: '1'
        ieee80211ax:
          type: string
          example: '0'
        ieee80211n:
          type: string
          example: '1'
        max_txpower:
          type: string
          example: '23'
        num_sta[0]:
          type: string
          example: '6'
        num_sta_ht40_intolerant:
          type: string
          example: '0'
        num_sta_ht_20_mhz:
          type: string
          example: '2'
        num_sta_ht_no_gf:
          type: string
          example: '6'
        num_sta_no_ht:
          type: string
          example: '0'
        num_sta_no_short_preamble:
          type: string
          example: '6'
        num_sta_no_short_slot_time:
          type: string
          example: '6'
        num_sta_non_erp:
          type: string
          example: '0'
        olbc:
          type: string
          example: '0'
        olbc_ht:
          type: string
          example: '0'
        phy:
          type: string
          example: phy1
        rx_vht_mcs_map:
          type: string
          example: fffa
        secondary_channel:
          type: string
          example: '1'
        ssid[0]:
          type: string
          example: test_ap
        state:
          type: string
          example: ENABLED
        supported_rates:
          type: string
          example: 0c 12 18 24 30 48 60 6c
        tx_vht_mcs_map:
          type: string
          example: fffa
        vht_caps_info:
          type: string
          example: 318001b0
        vht_oper_centr_freq_seg0_idx:
          type: string
          example: '42'
        vht_oper_centr_freq_seg1_idx:
          type: string
          example: '0'
        vht_oper_chwidth:
          type: string
          example: '1'
    StationInfo:
      type: object
      properties:
        AKMSuiteSelector:
          type: string
          example: 00-0f-ac-2
        aid:
          type: string
          example: '3'
        capability:
          type: string
          example: '0x11'
        connected_time:
          type: string
          example: '4946'
        dot11RSNAStatsSTAAddress:
          type: string
          example: '11:22:33:44:55:61'
        dot11RSNAStatsSelectedPairwiseCipher:
          type: string
          example: 00-0f-ac-4
        dot11RSNAStatsTKIPLocalMICFailures:
          type: string
          example: '0'
        dot11RSNAStatsTKIPRemoteMICFailures:
          type: string
          example: '0'
        dot11RSNAStatsVersion:
          type: string
          example: '1'
        flags:
          type: string
          example: '[AUTH][ASSOC][AUTHORIZED][WMM][HT]'
        hostapdWPAPTKGroupState:
          type: string
          example: '0'
        hostapdWPAPTKState:
          type: string
          example: '11'
        ht_caps_info:
          type: string
          example: '0x016e'
        ht_mcs_bitmask:
          type: string
          example: ff000000000000000000
        inactive_msec:
          type: string
          example: '1584'
        listen_interval:
          type: string
          example: '1'
        rx_bytes:
          type: string
          example: '126055'
        rx_packets:
          type: string
          example: '2394'
        rx_rate_info:
          type: string
          example: '60'
        signal:
          type: string
          example: '-85'
        supported_rates:
          type: string
          example: 8c 12 98 24 b0 48 60 6c
        timeout_next:
          type: string
          example: NULLFUNC POLL
        tx_bytes:
          type: string
          example: '485584'
        tx_packets:
          type: string
          example: '1957'
        tx_rate_info:
          type: string
          example: 1200 mcs 5 shortGI
        vlan_id:
          type: string
          example: '4247'
        wpa:
          type: string
          example: '2'
    ChannelParameters:
      type: object
      properties:
        Mode:
          type: string
          description: g for 2.4Ghz, a for 5Ghz
          pattern: /^(a|b|g)$/
          example: a
        Channel:
          type: integer
          example: 36
          description: >-
            See the [list of WLAN
            channels](https://en.wikipedia.org/wiki/List_of_WLAN_channels)
        Bandwidth:
          type: integer
          description: Channel width in Mhz. One of 20, 40, 80, 160, or 8080 for 80+80
          example: 80
        HT_Enable:
          type: boolean
          description: 802.11n support - High Throughput
          example: true
        VHT_Enable:
          type: boolean
          description: 802.11ac support - Very High Throughput (WiFi 5)
          example: true
        HE_Enable:
          type: boolean
          description: 802.11ax support - High Effiency (WiFi 6)
          example: true
    CalculatedChannelParameters:
      type: object
      description: Calculated center frequencies and channel widths
      properties:
        Vht_oper_centr_freq_seg0_idx:
          type: integer
          example: 42
        He_oper_centr_freq_seg0_idx:
          type: integer
          example: 42
        Vht_oper_chwidth:
          type: integer
          example: 1
        He_oper_chwidth:
          type: integer
          example: 1
    HostapdConfig:
      type: object
      properties:
        Country_code:
          type: string
          description: 2-letter country code
          example: US
        Vht_capab:
          description: >-
            Very High Throughput capabilities for 5ghz (802.11ac). Should be
            removed for 2.4ghz
          type: string
          example: >-
            [RXLDPC][SHORT-GI-80][TX-STBC-2BY1][RX-STBC-1][MAX-A-MPDU-LEN-EXP3][RX-ANTENNA-PATTERN][TX-ANTENNA-PATTERN]
        Ht_capab:
          type: string
          description: High Throughput capabilities (802.11n)
          example: >-
            [LDPC][HT40+][HT40-][GF][SHORT-GI-20][SHORT-GI-40][TX-STBC][RX-STBC1]
        Hw_mode:
          type: string
          description: a for 5ghz, b/g for 2.4ghz
          pattern: /^(a/b/g)$/
          example: a
        Ieee80211ax:
          type: integer
          description: WiFi 6 support
          example: 1
        He_su_beamformer:
          type: integer
          description: High Efficiency (WiFi 6) Single User Beamformer enable
          example: 1
        He_su_beamformee:
          type: integer
          description: High Efficiency (WiFi 6) Single User Beamformee enable
          example: 1
        He_mu_beamformer:
          type: integer
          description: High Efficiency (WiFi 6) Multiple User Beamformer enable
          example: 1
        Ssid:
          type: string
          description: WiFi SSID Name
          example: 8hzWANip
        Channel:
          type: integer
          description: >-
            See the [list of WLAN
            channels](https://en.wikipedia.org/wiki/List_of_WLAN_channels)
          example: 36
        Vht_oper_centr_freq_seg0_idx:
          type: integer
          example: 42
        He_oper_centr_freq_seg0_idx:
          type: integer
          example: 42
        Vht_oper_chwidth:
          type: integer
          example: 1
        He_oper_chwidth:
          type: integer
          example: 1
    WireguardPeer:
      type: object
      properties:
        PublicKey:
          description: Base64 public key
          type: string
          example: 7SdFRh8o76RjUn/y4c7cQgCcCXA85s47/gVAdem3bBI=
        AllowedIPs:
          description: Allowed IP address
          type: string
          example: 192.168.3.3/32
        Endpoint:
          description: Endpoint to connect to
          type: string
          example: 192.168.2.1:51280
        PresharedKey:
          description: Preshared key
          example: w9bfMAfqRnLjnlHofX+JSzaRDADrW1tvyW1UWzXJjrg=
        PersistentKeepalive:
          description: Keepalive timeout
          type: integer
          example: 25
      xml:
        name: WireguardPeer
    WireguardInterface:
      type: object
      properties:
        PrivateKey:
          description: Base64 private key
          type: string
          example: 6KVVbcmXanU/6mByHy17eNO9DXe9BQJWOyaA204JYH4=
        Address:
          description: IP address for interface
          type: string
          example: 192.168.3.3/24
        DNS:
          description: DNS IP address to use
          type: string
          example: 1.1.1.1
    WireguardConfig:
      type: object
      properties:
        Interface:
          description: Client interface
          $ref: '#/components/schemas/WireguardInterface'
        Peer:
          description: Client peer
          $ref: '#/components/schemas/WireguardPeer'
    LookupASN:
      type: object
      properties:
        IP:
          description: IP address
          type: string
          example: 1.1.1.1
        ASN:
          description: ASN identifier
          type: string
          example: 13335
        Name:
          description: ASN Name
          type: string
          example: CLOUDFLARENET
        Country:
          description: ASN Country
          type: string
          example: US
    FirewallConfig:
      type: object
      properties:
        ForwardingRules:
          description: Forwarding Rules
          type: array
          items:
            $ref: '#/components/schemas/FirewallForward'
        BlockRules:
          description: Block Rules
          type: array
          items:
            $ref: '#/components/schemas/FirewallBlock'
        ForwardingBlockRules:
          description: Forwarding Block Rules
          type: array
          items:
            $ref: '#/components/schemas/FirewallBlockForward'
        ServicePorts:
          description: Service Ports
          type: array
          items:
            $ref: '#/components/schemas/ServicePort'
    GodyndnsConfig:
      type: object
      properties:
        Provider:
          type: string
          example: Cloudflare
        Email:
          type: string
          example: root@localhost.domain
        Password:
          type: string
          example: stringypassword
        LoginToken:
          type: string
          example: logintoken++
        IpUrl:
          type: string
          example: https://ip4.seeip.org
        Ipv6Url:
          type: string
          example: https://ip6.seeip.org
        IpType:
          type: string
          example: IPv4
        Interval:
          type: integer
          description: How many seconds to wait before checking for an update
          example: 300
        Socks5Proxy:
          type: string
          description: socks5 proxy to use
        Resolver:
          type: string
          description: DNS Resolver to use
          example: 8.8.8.8
        RunOnce:
          type: boolean
          description: Run once and exit (note always set to true)
          example: true
        Domains:
          type: array
          items:
            $ref: '#/components/schemas/GodyndnsDomain'
    GodyndnsDomain:
      type: object
      properties:
        DomainName:
          type: string
          example: supernetworks.org
        SubDomains:
          type: array
          items:
            type: string
          example:
            - dyndns
    Token:
      type: object
      properties:
        Name:
          type: string
          example: TestToken
        Token:
          type: string
          example: dG9rbnRva250b2tudG9rbnRva250b2tudG9rbnRva24K
        ScopedPaths:
          type: array
          items:
            type: string
          example:
            - wifi
        Expire:
          type: integer
          example: 1656440879
    Notification:
      type: object
      properties:
        Conditions:
          type: object
          properties:
            Prefix:
              type: string
              example: drop:input
            Protocol:
              type: string
              example: tcp
            DstIP:
              type: string
              example: 1.1.1.1
            DstPort:
              type: integer
              example: 80
            SrcIP:
              type: string
              example: 192.168.2.10
            SrcPort:
              type: integer
              example: 1234
        Notification:
          type: boolean
          example: true
  requestBodies:
    DeviceEntry:
      content:
        application/json:
          schema:
            allOf:
              - description: My Device
              - $ref: '#/components/schemas/DeviceEntry'
      description: Device object
      required: true
    GroupEntry:
      content:
        application/json:
          schema:
            allOf:
              - description: My Group
                title: VPN
              - $ref: '#/components/schemas/GroupEntry'
      description: Group object
      required: true
    PSKEntry:
      content:
        application/json:
          schema:
            allOf:
              - description: My PSK
                title: PSK
              - $ref: '#/components/schemas/PSKEntry'
      description: PSKEntry object
      required: true
    PSKAuthFailure:
      content:
        application/json:
          schema:
            allOf:
              - description: My PSKAuthFailure
                title: PSK Auth Failure
              - $ref: '#/components/schemas/PSKAuthFailure'
      description: PSKAuthFailure object that needs to be added
      required: true
    PSKAuthSuccess:
      content:
        application/json:
          schema:
            allOf:
              - description: My PSKAuthSuccess
                title: PSK Auth Success
              - $ref: '#/components/schemas/PSKAuthSuccess'
      description: PSKAuthSuccess object that needs to be added
      required: true
    DHCPUpdate:
      content:
        application/json:
          schema:
            allOf:
              - description: My DHCPUpdate
                title: DHCPUpdate
              - $ref: '#/components/schemas/DHCPUpdate'
      description: DHCPUpdate object that needs to be added
      required: true
    WireguardUpdate:
      content:
        application/json:
          schema:
            allOf:
              - description: WireguardUpdate
                title: WireguardUpdate
              - $ref: '#/components/schemas/WireguardUpdate'
      description: WireguardUpdate object that needs to be added
      required: true
    PluginEntry:
      content:
        application/json:
          schema:
            allOf:
              - description: My PluginEntry
                title: PluginEntry
              - $ref: '#/components/schemas/PluginEntry'
      description: PluginEntry to be added or updated
      required: true
    InterfaceEntry:
      content:
        application/json:
          schema:
            allOf:
              - description: InterfaceEntry
                title: InterfaceEntry
              - $ref: '#/components/schemas/InterfaceEntry'
      description: InterfaceEntry to be added or updated
      required: true
    DNSDomainOverride:
      content:
        application/json:
          schema:
            allOf:
              - description: My DNSDomainOverride
                title: DNSDomainOverride
              - $ref: '#/components/schemas/DNSDomainOverride'
      description: DNSDomainOverride object that needs to be added
      required: true
    DNSListEntry:
      content:
        application/json:
          schema:
            allOf:
              - description: My DNSListEntry
                title: DNSListEntry
              - $ref: '#/components/schemas/DNSListEntry'
      description: DNSListEntry object that needs to be added
      required: true
    WireguardPeer:
      content:
        application/json:
          schema:
            allOf:
              - description: Peer
              - $ref: '#/components/schemas/WireguardPeer'
      description: Device object
      required: false
    GodyndnsConfig:
      content:
        application/json:
          schema:
            allOf:
              - description: GodyndnsConfig
              - $ref: '#/components/schemas/GodyndnsConfig'
      description: >-
        Dyndns Configuration. See
        [godns](https://github.com/TimothyYe/godns#configuration-file-format)
        for details
      required: true
    ChannelParameters:
      content:
        application/json:
          schema:
            allOf:
              - description: ChannelParameters
              - $ref: '#/components/schemas/ChannelParameters'
      description: Channel Parameters for WiFi
      required: true
    HostapdConfig:
      content:
        application/json:
          schema:
            allOf:
              - description: HostapdConfig
              - $ref: '#/components/schemas/HostapdConfig'
      description: Channel Parameters for WiFi
      required: true
    AbstractDHCPRequest:
      content:
        application/json:
          schema:
            allOf:
              - description: DHCP Request
                title: AbstractDHCPRequest
              - $ref: '#/components/schemas/AbstractDHCPRequest'
      description: AbstractDHCPRequest for requesting an IP by an Identifier
      required: true
    FirewallBlock:
      content:
        application/json:
          schema:
            allOf:
              - description: Block Source and Destination IP combination
                title: FirewallBlock
              - $ref: '#/components/schemas/FirewallBlock'
      description: FirewallBlock
      required: true
    FirewallForward:
      content:
        application/json:
          schema:
            allOf:
              - description: Forward Source and Destination IP/Port Combination
                title: FirewallBlock
              - $ref: '#/components/schemas/FirewallForward'
      description: >-
        Use 'any' for the port to forward all ports. Specify a port or a port
        range otherwise
      required: true
    FirewallBlockForward:
      content:
        application/json:
          schema:
            allOf:
              - description: Block Forwarding of Traffic
                title: FirewallBlockForward
              - $ref: '#/components/schemas/FirewallBlockForward'
      description: FirewallBlockForward
      required: true
    ServicePort:
      content:
        application/json:
          schema:
            allOf:
              - description: Service Ports to SPR allowed by Firewall
                title: FirewallBlock
              - $ref: '#/components/schemas/ServicePort'
      description: ServicePort
      required: true
    Token:
      content:
        application/json:
          schema:
            allOf:
              - description: My Token
              - $ref: '#/components/schemas/Token'
      description: Token object
      required: true
    Notification:
      content:
        application/json:
          schema:
            allOf:
              - description: Notification
              - $ref: '#/components/schemas/Notification'
      description: Notification object
      required: true
  securitySchemes:
    basicAuth:
      description: >
        The API supports Basic Authentication based on the auth_users file,
        using the Basic Schema.


        To implement this, a client should include an "Authorization: Basic"
        header with the credentials formatted as `base64(username:password)`.
        For a javascript example, see the frontend's
        [Api.js](https://github.com/spr-networks/super/blob/main/frontend/src/components/Helpers/Api.js#L38).
      type: http
      scheme: basic
    bearerAuth:
      description: >
        The API also supports Bearer Tokens, based on the `auth_tokens` file.


        To implement this, a client should include an "Authorization: Bearer"
        token.

        See [Swagger's
        page](https://swagger.io/docs/specification/authentication/bearer-authentication/)
        for more examples.
      type: http
      scheme: bearer
  examples:
    DeviceEntry:
      value:
        Name: mbp
        MAC: '11:22:33:44:55:66'
        WGPubKey: ''
        VLANTag: ''
        RecentIP: 192.168.2.102
        PskEntry:
          Type: sae
          Psk: '**'
        Groups:
          - wan
          - lan
          - dns
        DeviceTags:
          - private
    GroupEntry:
      value:
        Name: vpn
        Disabled: false
        GroupTags:
          - private
    PSKEntry:
      value:
        Type: sae
        Psk: password
    PluginEntry:
      value:
        Name: dns-block
        URI: dns/block
        UnixPath: /state/dns/dns_block_plugin
        Enabled: true
